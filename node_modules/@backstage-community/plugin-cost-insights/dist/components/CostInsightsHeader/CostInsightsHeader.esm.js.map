{"version":3,"file":"CostInsightsHeader.esm.js","sources":["../../../src/components/CostInsightsHeader/CostInsightsHeader.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport useAsync from 'react-use/esm/useAsync';\nimport { useCostInsightsStyles } from '../../utils/styles';\nimport { Group } from '@backstage-community/plugin-cost-insights-common';\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\n\nfunction useDisplayName(): string {\n  const identityApi = useApi(identityApiRef);\n  const state = useAsync(() => identityApi.getProfileInfo(), [identityApi]);\n  return state.loading ? '' : state.value?.displayName || 'Mysterious Stranger';\n}\n\ntype CostInsightsHeaderProps = {\n  groupId: string;\n  groups: Group[];\n  hasCostData: boolean;\n  alerts: number;\n};\n\nconst CostInsightsHeaderNoData = ({\n  groupId,\n  groups,\n}: CostInsightsHeaderProps) => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n  const hasMultipleGroups = groups.length > 1;\n  const ownerName = groups.find(({ id }) => id === groupId)?.name ?? groupId;\n\n  return (\n    <>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        <Typography component=\"span\" role=\"img\" aria-label=\"flushed-face\">\n          üò≥\n        </Typography>{' '}\n        Well this is awkward\n      </Typography>\n      <Typography className={classes.h6Subtle} align=\"center\" gutterBottom>\n        <b>Hey, {displayName}!</b> <b>{ownerName}</b> doesn't seem to have any\n        cloud costs.\n      </Typography>\n      {hasMultipleGroups && (\n        <Typography align=\"center\" gutterBottom>\n          Maybe we picked the wrong team, choose another from the menu above?\n        </Typography>\n      )}\n    </>\n  );\n};\n\nconst CostInsightsHeaderAlerts = ({\n  groupId,\n  groups,\n  alerts,\n}: CostInsightsHeaderProps) => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n  const ownerName = groups.find(({ id }) => id === groupId)?.name ?? groupId;\n\n  return (\n    <>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        <Typography component=\"span\" role=\"img\" aria-label=\"magnifying-glass\">\n          üîé\n        </Typography>{' '}\n        You have {alerts} thing{alerts > 1 && 's'} to look into\n      </Typography>\n      <Typography className={classes.h6Subtle} align=\"center\" gutterBottom>\n        <b>Hey, {displayName}!</b> We've identified{' '}\n        {alerts > 1 ? 'a few things ' : 'one thing '}\n        <b>{ownerName}</b> should look into next.\n      </Typography>\n    </>\n  );\n};\n\nconst CostInsightsHeaderNoAlerts = ({\n  groupId,\n  groups,\n}: CostInsightsHeaderProps) => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n  const ownerName = groups.find(({ id }) => id === groupId)?.name ?? groupId;\n\n  return (\n    <>\n      <Typography variant=\"h4\" gutterBottom align=\"center\">\n        <Typography component=\"span\" role=\"img\" aria-label=\"thumbs-up\">\n          üëç\n        </Typography>{' '}\n        Your team is doing great\n      </Typography>\n      <Typography className={classes.h6Subtle} align=\"center\" gutterBottom>\n        <b>Hey, {displayName}!</b> <b>{ownerName}</b> is doing well. No major\n        changes this month.\n      </Typography>\n    </>\n  );\n};\n\nexport const CostInsightsHeaderNoGroups = () => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n  return (\n    <>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        <Typography component=\"span\" role=\"img\" aria-label=\"flushed-face\">\n          üò≥\n        </Typography>{' '}\n        Well this is awkward\n      </Typography>\n      <Typography className={classes.h6Subtle} align=\"center\" gutterBottom>\n        <b>Hey, {displayName}!</b> It doesn't look like you belong to any teams.\n      </Typography>\n    </>\n  );\n};\n\nexport const CostInsightsHeader = (props: CostInsightsHeaderProps) => {\n  if (!props.hasCostData) {\n    return <CostInsightsHeaderNoData {...props} />;\n  }\n  if (props.alerts) {\n    return <CostInsightsHeaderAlerts {...props} />;\n  }\n  return <CostInsightsHeaderNoAlerts {...props} />;\n};\n"],"names":[],"mappings":";;;;;;AAuBA,SAAS,cAAyB,GAAA;AAChC,EAAM,MAAA,WAAA,GAAc,OAAO,cAAc,CAAA;AACzC,EAAM,MAAA,KAAA,GAAQ,SAAS,MAAM,WAAA,CAAY,gBAAkB,EAAA,CAAC,WAAW,CAAC,CAAA;AACxE,EAAA,OAAO,KAAM,CAAA,OAAA,GAAU,EAAK,GAAA,KAAA,CAAM,OAAO,WAAe,IAAA,qBAAA;AAC1D;AASA,MAAM,2BAA2B,CAAC;AAAA,EAChC,OAAA;AAAA,EACA;AACF,CAA+B,KAAA;AAC7B,EAAA,MAAM,cAAc,cAAe,EAAA;AACnC,EAAA,MAAM,UAAU,qBAAsB,EAAA;AACtC,EAAM,MAAA,iBAAA,GAAoB,OAAO,MAAS,GAAA,CAAA;AAC1C,EAAM,MAAA,SAAA,GAAY,MAAO,CAAA,IAAA,CAAK,CAAC,EAAE,IAAS,KAAA,EAAA,KAAO,OAAO,CAAA,EAAG,IAAQ,IAAA,OAAA;AAEnE,EACE,uBAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBACG,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,IAAA,EAAK,OAAM,QAAS,EAAA,YAAA,EAAY,IAClD,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,SAAA,EAAU,QAAO,IAAK,EAAA,KAAA,EAAM,YAAW,EAAA,cAAA,EAAA,EAAe,WAElE,CAAA,EAAc,KAAI,sBAEpB,CAAA,kBACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,SAAW,EAAA,OAAA,CAAQ,UAAU,KAAM,EAAA,QAAA,EAAS,YAAY,EAAA,IAAA,EAAA,kBACjE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EAAE,SAAM,WAAY,EAAA,GAAC,CAAI,EAAA,GAAA,kBAAE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EAAG,SAAU,CAAI,EAAA,wCAE/C,CACC,EAAA,iBAAA,oBACE,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAM,QAAS,EAAA,YAAA,EAAY,IAAC,EAAA,EAAA,qEAExC,CAEJ,CAAA;AAEJ,CAAA;AAEA,MAAM,2BAA2B,CAAC;AAAA,EAChC,OAAA;AAAA,EACA,MAAA;AAAA,EACA;AACF,CAA+B,KAAA;AAC7B,EAAA,MAAM,cAAc,cAAe,EAAA;AACnC,EAAA,MAAM,UAAU,qBAAsB,EAAA;AACtC,EAAM,MAAA,SAAA,GAAY,MAAO,CAAA,IAAA,CAAK,CAAC,EAAE,IAAS,KAAA,EAAA,KAAO,OAAO,CAAA,EAAG,IAAQ,IAAA,OAAA;AAEnE,EACE,uBAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBACG,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,IAAA,EAAK,OAAM,QAAS,EAAA,YAAA,EAAY,IAClD,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,SAAA,EAAU,QAAO,IAAK,EAAA,KAAA,EAAM,YAAW,EAAA,kBAAA,EAAA,EAAmB,WAEtE,CAAA,EAAc,GAAI,EAAA,WAAA,EACR,MAAO,EAAA,QAAA,EAAO,MAAS,GAAA,CAAA,IAAK,GAAI,EAAA,eAC5C,mBACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,SAAW,EAAA,OAAA,CAAQ,QAAU,EAAA,KAAA,EAAM,UAAS,YAAY,EAAA,IAAA,EAAA,kBACjE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EAAE,OAAM,EAAA,WAAA,EAAY,GAAC,CAAI,EAAA,mBAAA,EAAkB,GAC3C,EAAA,MAAA,GAAS,CAAI,GAAA,eAAA,GAAkB,YAChC,kBAAA,KAAA,CAAA,aAAA,CAAC,GAAG,EAAA,IAAA,EAAA,SAAU,CAAI,EAAA,yBACpB,CACF,CAAA;AAEJ,CAAA;AAEA,MAAM,6BAA6B,CAAC;AAAA,EAClC,OAAA;AAAA,EACA;AACF,CAA+B,KAAA;AAC7B,EAAA,MAAM,cAAc,cAAe,EAAA;AACnC,EAAA,MAAM,UAAU,qBAAsB,EAAA;AACtC,EAAM,MAAA,SAAA,GAAY,MAAO,CAAA,IAAA,CAAK,CAAC,EAAE,IAAS,KAAA,EAAA,KAAO,OAAO,CAAA,EAAG,IAAQ,IAAA,OAAA;AAEnE,EAAA,iFAEK,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,SAAQ,IAAK,EAAA,YAAA,EAAY,MAAC,KAAM,EAAA,QAAA,EAAA,sCACzC,UAAW,EAAA,EAAA,SAAA,EAAU,QAAO,IAAK,EAAA,KAAA,EAAM,cAAW,WAAY,EAAA,EAAA,WAE/D,GAAc,GAAI,EAAA,0BAEpB,mBACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,WAAW,OAAQ,CAAA,QAAA,EAAU,OAAM,QAAS,EAAA,YAAA,EAAY,wBACjE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EAAE,SAAM,WAAY,EAAA,GAAC,GAAI,GAAC,kBAAA,KAAA,CAAA,aAAA,CAAC,WAAG,SAAU,CAAA,EAAI,8CAE/C,CACF,CAAA;AAEJ,CAAA;AAEO,MAAM,6BAA6B,MAAM;AAC9C,EAAA,MAAM,cAAc,cAAe,EAAA;AACnC,EAAA,MAAM,UAAU,qBAAsB,EAAA;AACtC,EAAA,iFAEK,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,IAAA,EAAK,OAAM,QAAS,EAAA,YAAA,EAAY,IAClD,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAW,SAAU,EAAA,MAAA,EAAO,MAAK,KAAM,EAAA,YAAA,EAAW,kBAAe,WAElE,CAAA,EAAc,GAAI,EAAA,sBAEpB,mBACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,SAAW,EAAA,OAAA,CAAQ,UAAU,KAAM,EAAA,QAAA,EAAS,YAAY,EAAA,IAAA,EAAA,sCACjE,GAAE,EAAA,IAAA,EAAA,OAAA,EAAM,aAAY,GAAC,CAAA,EAAI,gDAC5B,CACF,CAAA;AAEJ;AAEa,MAAA,kBAAA,GAAqB,CAAC,KAAmC,KAAA;AACpE,EAAI,IAAA,CAAC,MAAM,WAAa,EAAA;AACtB,IAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,wBAA0B,EAAA,EAAA,GAAG,KAAO,EAAA,CAAA;AAAA;AAE9C,EAAA,IAAI,MAAM,MAAQ,EAAA;AAChB,IAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,wBAA0B,EAAA,EAAA,GAAG,KAAO,EAAA,CAAA;AAAA;AAE9C,EAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,0BAA4B,EAAA,EAAA,GAAG,KAAO,EAAA,CAAA;AAChD;;;;"}