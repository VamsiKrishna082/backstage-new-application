{"version":3,"file":"CostInsightsNavigation.esm.js","sources":["../../../src/components/CostInsightsNavigation/CostInsightsNavigation.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Collapse from '@material-ui/core/Collapse';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport { useNavigationStyles as useStyles } from '../../utils/styles';\nimport { useConfig, useScroll } from '../../hooks';\nimport { findAlways } from '../../utils/assert';\nimport {\n  DefaultNavigation,\n  NavigationItem,\n  getDefaultNavigationItems,\n} from '../../utils/navigation';\nimport {\n  Maybe,\n  Product,\n} from '@backstage-community/plugin-cost-insights-common';\n\ntype CostInsightsNavigationProps = {\n  alerts: number;\n  products: Maybe<Product[]>;\n};\n\nconst NavigationMenuItem = ({ navigation, icon, title }: NavigationItem) => {\n  const classes = useStyles();\n  const [, setScroll] = useScroll();\n  return (\n    <MenuItem\n      data-testid={`menu-item-${navigation}`}\n      className={classes.menuItem}\n      onClick={() => setScroll(navigation)}\n    >\n      <ListItemIcon className={classes.listItemIcon}>{icon}</ListItemIcon>\n      <ListItemText\n        primary={<Typography className={classes.title}>{title}</Typography>}\n      />\n    </MenuItem>\n  );\n};\n\nexport const CostInsightsNavigation = React.memo(\n  ({ alerts, products }: CostInsightsNavigationProps) => {\n    const classes = useStyles();\n    const { icons } = useConfig();\n    const [isOpen, setOpen] = useState(false);\n\n    const defaultNavigationItems = getDefaultNavigationItems(alerts);\n    const productNavigationItems: NavigationItem[] =\n      products?.map(product => ({\n        title: product.name,\n        navigation: product.kind,\n        icon: findAlways(icons, i => i.kind === product.kind).component,\n      })) ?? [];\n\n    useEffect(\n      function toggleProductMenuItems() {\n        if (products?.length) {\n          setOpen(true);\n        } else {\n          setOpen(false);\n        }\n      },\n      [products],\n    );\n\n    return (\n      <MenuList className={classes.menuList}>\n        {defaultNavigationItems.map(item => (\n          <NavigationMenuItem\n            key={`navigation-menu-item-${item.navigation}`}\n            navigation={item.navigation}\n            title={item.title}\n            icon={\n              item.navigation === DefaultNavigation.AlertInsightsHeader ? (\n                <Badge badgeContent={alerts} color=\"secondary\">\n                  {React.cloneElement(item.icon, {\n                    className: classes.navigationIcon,\n                  })}\n                </Badge>\n              ) : (\n                React.cloneElement(item.icon, {\n                  className: classes.navigationIcon,\n                })\n              )\n            }\n          />\n        ))}\n        <Collapse in={isOpen} timeout={850}>\n          {productNavigationItems.map((item: NavigationItem) => (\n            <NavigationMenuItem\n              key={`navigation-menu-item-${item.navigation}`}\n              navigation={item.navigation}\n              icon={React.cloneElement(item.icon, {\n                className: classes.navigationIcon,\n              })}\n              title={item.title}\n            />\n          ))}\n        </Collapse>\n      </MenuList>\n    );\n  },\n);\n"],"names":["useStyles"],"mappings":"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"}