{"version":3,"file":"PeriodSelect.esm.js","sources":["../../../src/components/PeriodSelect/PeriodSelect.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select, { SelectProps } from '@material-ui/core/Select';\nimport { Duration } from '../../types';\nimport { formatLastTwoLookaheadQuarters } from '../../utils/formatters';\nimport { findAlways } from '../../utils/assert';\nimport { useSelectStyles as useStyles } from '../../utils/styles';\nimport { useLastCompleteBillingDate } from '../../hooks';\n\nexport type PeriodOption = {\n  value: Duration;\n  label: string;\n};\n\nexport function getDefaultOptions(\n  lastCompleteBillingDate: string,\n): PeriodOption[] {\n  return [\n    {\n      value: Duration.P90D,\n      label: 'Past 6 Months',\n    },\n    {\n      value: Duration.P30D,\n      label: 'Past 60 Days',\n    },\n    {\n      value: Duration.P3M,\n      label: formatLastTwoLookaheadQuarters(lastCompleteBillingDate),\n    },\n  ];\n}\n\ntype PeriodSelectProps = {\n  duration: Duration;\n  onSelect: (duration: Duration) => void;\n  options?: PeriodOption[];\n};\n\nexport const PeriodSelect = ({\n  duration,\n  onSelect,\n  options,\n}: PeriodSelectProps) => {\n  const classes = useStyles();\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n  const optionsOrDefault =\n    options ?? getDefaultOptions(lastCompleteBillingDate);\n\n  const handleOnChange: SelectProps['onChange'] = e => {\n    onSelect(e.target.value as Duration);\n  };\n\n  const renderValue: SelectProps['renderValue'] = value => {\n    const option = findAlways(optionsOrDefault, o => o.value === value);\n    return <b>{option.label}</b>;\n  };\n\n  return (\n    <Select\n      className={classes.select}\n      variant=\"outlined\"\n      onChange={handleOnChange}\n      value={duration}\n      renderValue={renderValue}\n      data-testid=\"period-select\"\n    >\n      {optionsOrDefault.map(option => (\n        <MenuItem\n          className={classes.menuItem}\n          key={option.value}\n          value={option.value}\n          data-testid={`period-select-option-${option.value}`}\n        >\n          {option.label}\n        </MenuItem>\n      ))}\n    </Select>\n  );\n};\n"],"names":["useStyles"],"mappings":";;;;;;;;;;;;;;;;AA8BO,SAAS,kBACd,uBACgB,EAAA;AAChB,EAAO,OAAA;AAAA,IACL;AAAA,MACE,OAAO,QAAS,CAAA,IAAA;AAAA,MAChB,KAAO,EAAA;AAAA,KACT;AAAA,IACA;AAAA,MACE,OAAO,QAAS,CAAA,IAAA;AAAA,MAChB,KAAO,EAAA;AAAA,KACT;AAAA,IACA;AAAA,MACE,OAAO,QAAS,CAAA,GAAA;AAAA,MAChB,KAAA,EAAO,+BAA+B,uBAAuB;AAAA;AAC/D,GACF;AACF;AAQO,MAAM,eAAe,CAAC;AAAA,EAC3B,QAAA;AAAA,EACA,QAAA;AAAA,EACA;AACF,CAAyB,KAAA;AACvB,EAAA,MAAM,UAAUA,eAAU,EAAA;AAC1B,EAAA,MAAM,0BAA0B,0BAA2B,EAAA;AAC3D,EAAM,MAAA,gBAAA,GACJ,OAAW,IAAA,iBAAA,CAAkB,uBAAuB,CAAA;AAEtD,EAAA,MAAM,iBAA0C,CAAK,CAAA,KAAA;AACnD,IAAS,QAAA,CAAA,CAAA,CAAE,OAAO,KAAiB,CAAA;AAAA,GACrC;AAEA,EAAA,MAAM,cAA0C,CAAS,KAAA,KAAA;AACvD,IAAA,MAAM,SAAS,UAAW,CAAA,gBAAA,EAAkB,CAAK,CAAA,KAAA,CAAA,CAAE,UAAU,KAAK,CAAA;AAClE,IAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,GAAG,EAAA,IAAA,EAAA,MAAA,CAAO,KAAM,CAAA;AAAA,GAC1B;AAEA,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,WAAW,OAAQ,CAAA,MAAA;AAAA,MACnB,OAAQ,EAAA,UAAA;AAAA,MACR,QAAU,EAAA,cAAA;AAAA,MACV,KAAO,EAAA,QAAA;AAAA,MACP,WAAA;AAAA,MACA,aAAY,EAAA;AAAA,KAAA;AAAA,IAEX,gBAAA,CAAiB,IAAI,CACpB,MAAA,qBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,WAAW,OAAQ,CAAA,QAAA;AAAA,QACnB,KAAK,MAAO,CAAA,KAAA;AAAA,QACZ,OAAO,MAAO,CAAA,KAAA;AAAA,QACd,aAAA,EAAa,CAAwB,qBAAA,EAAA,MAAA,CAAO,KAAK,CAAA;AAAA,OAAA;AAAA,MAEhD,MAAO,CAAA;AAAA,KAEX;AAAA,GACH;AAEJ;;;;"}