import React, { forwardRef, useState, useEffect } from 'react';
import { DateTime } from 'luxon';
import Box from '@material-ui/core/Box';
import FormControl from '@material-ui/core/FormControl';
import FormControlLabel from '@material-ui/core/FormControlLabel';
import RadioGroup from '@material-ui/core/RadioGroup';
import Radio from '@material-ui/core/Radio';
import Typography from '@material-ui/core/Typography';
import { AlertSnoozeOptions } from '../types/Alert.esm.js';
import { DEFAULT_DATE_FORMAT } from '../types/DateFormat.esm.js';
import { Duration } from '../types/Duration.esm.js';
import { useAlertDialogStyles } from '../utils/styles.esm.js';
import { intervalsOf } from '../utils/duration.esm.js';

const AlertSnoozeForm = forwardRef(({ onSubmit, disableSubmit }, ref) => {
  const classes = useAlertDialogStyles();
  const [duration, setDuration] = useState(Duration.P7D);
  useEffect(() => disableSubmit(false), [disableSubmit]);
  const onFormSubmit = (e) => {
    e.preventDefault();
    if (duration) {
      const repeatInterval = 1;
      const today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);
      onSubmit({
        intervals: intervalsOf(duration, today, repeatInterval)
      });
    }
  };
  const onSnoozeDurationChange = (_, value) => {
    setDuration(value);
  };
  return /* @__PURE__ */ React.createElement("form", { ref, onSubmit: onFormSubmit }, /* @__PURE__ */ React.createElement(FormControl, { component: "fieldset", fullWidth: true }, /* @__PURE__ */ React.createElement(Typography, { color: "textPrimary" }, /* @__PURE__ */ React.createElement("b", null, "For how long?")), /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(
    RadioGroup,
    {
      name: "snooze-alert-options",
      value: duration,
      onChange: onSnoozeDurationChange
    },
    AlertSnoozeOptions.map((option) => /* @__PURE__ */ React.createElement(
      FormControlLabel,
      {
        key: `snooze-alert-option-${option.duration}`,
        label: option.label,
        value: option.duration,
        control: /* @__PURE__ */ React.createElement(Radio, { className: classes.radio })
      }
    ))
  ))));
});

export { AlertSnoozeForm };
//# sourceMappingURL=AlertSnoozeForm.esm.js.map
