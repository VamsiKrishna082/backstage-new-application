{"version":3,"file":"AlertSnoozeForm.esm.js","sources":["../../src/forms/AlertSnoozeForm.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n} from 'react';\nimport { DateTime } from 'luxon';\nimport Box from '@material-ui/core/Box';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Radio from '@material-ui/core/Radio';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  Alert,\n  AlertFormProps,\n  Duration,\n  DEFAULT_DATE_FORMAT,\n  AlertSnoozeFormData,\n  AlertSnoozeOptions,\n} from '../types';\nimport { Maybe } from '@backstage-community/plugin-cost-insights-common';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\nimport { intervalsOf } from '../utils/duration';\n\nexport type AlertSnoozeFormProps = AlertFormProps<Alert, AlertSnoozeFormData>;\n\nexport const AlertSnoozeForm = forwardRef<\n  HTMLFormElement,\n  AlertSnoozeFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [duration, setDuration] = useState<Maybe<Duration>>(Duration.P7D);\n\n  useEffect(() => disableSubmit(false), [disableSubmit]);\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    if (duration) {\n      const repeatInterval = 1;\n      const today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n      onSubmit({\n        intervals: intervalsOf(duration, today, repeatInterval),\n      });\n    }\n  };\n\n  const onSnoozeDurationChange = (\n    _: ChangeEvent<HTMLInputElement>,\n    value: string,\n  ) => {\n    setDuration(value as Duration);\n  };\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>For how long?</b>\n        </Typography>\n        <Box mb={1}>\n          <RadioGroup\n            name=\"snooze-alert-options\"\n            value={duration}\n            onChange={onSnoozeDurationChange}\n          >\n            {AlertSnoozeOptions.map(option => (\n              <FormControlLabel\n                key={`snooze-alert-option-${option.duration}`}\n                label={option.label}\n                value={option.duration}\n                control={<Radio className={classes.radio} />}\n              />\n            ))}\n          </RadioGroup>\n        </Box>\n      </FormControl>\n    </form>\n  );\n});\n"],"names":["useStyles"],"mappings":";;;;;;;;;;;;;;AA4CO,MAAM,kBAAkB,UAG7B,CAAA,CAAC,EAAE,QAAU,EAAA,aAAA,IAAiB,GAAQ,KAAA;AACtC,EAAA,MAAM,UAAUA,oBAAU,EAAA;AAC1B,EAAA,MAAM,CAAC,QAAU,EAAA,WAAW,CAAI,GAAA,QAAA,CAA0B,SAAS,GAAG,CAAA;AAEtE,EAAA,SAAA,CAAU,MAAM,aAAc,CAAA,KAAK,CAAG,EAAA,CAAC,aAAa,CAAC,CAAA;AAErD,EAAA,MAAM,eAAiC,CAAK,CAAA,KAAA;AAC1C,IAAA,CAAA,CAAE,cAAe,EAAA;AACjB,IAAA,IAAI,QAAU,EAAA;AACZ,MAAA,MAAM,cAAiB,GAAA,CAAA;AACvB,MAAA,MAAM,KAAQ,GAAA,QAAA,CAAS,GAAI,EAAA,CAAE,SAAS,mBAAmB,CAAA;AACzD,MAAS,QAAA,CAAA;AAAA,QACP,SAAW,EAAA,WAAA,CAAY,QAAU,EAAA,KAAA,EAAO,cAAc;AAAA,OACvD,CAAA;AAAA;AACH,GACF;AAEA,EAAM,MAAA,sBAAA,GAAyB,CAC7B,CAAA,EACA,KACG,KAAA;AACH,IAAA,WAAA,CAAY,KAAiB,CAAA;AAAA,GAC/B;AAEA,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,UAAK,GAAU,EAAA,QAAA,EAAU,gCACvB,KAAA,CAAA,aAAA,CAAA,WAAA,EAAA,EAAY,SAAU,EAAA,UAAA,EAAW,SAAS,EAAA,IAAA,EAAA,sCACxC,UAAW,EAAA,EAAA,KAAA,EAAM,aAChB,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,GAAE,EAAA,IAAA,EAAA,eAAa,CAClB,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,GAAI,EAAA,EAAA,EAAA,EAAI,CACP,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,UAAA;AAAA,IAAA;AAAA,MACC,IAAK,EAAA,sBAAA;AAAA,MACL,KAAO,EAAA,QAAA;AAAA,MACP,QAAU,EAAA;AAAA,KAAA;AAAA,IAET,kBAAA,CAAmB,IAAI,CACtB,MAAA,qBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,gBAAA;AAAA,MAAA;AAAA,QACC,GAAA,EAAK,CAAuB,oBAAA,EAAA,MAAA,CAAO,QAAQ,CAAA,CAAA;AAAA,QAC3C,OAAO,MAAO,CAAA,KAAA;AAAA,QACd,OAAO,MAAO,CAAA,QAAA;AAAA,QACd,OAAS,kBAAA,KAAA,CAAA,aAAA,CAAC,KAAM,EAAA,EAAA,SAAA,EAAW,QAAQ,KAAO,EAAA;AAAA;AAAA,KAE7C;AAAA,GAEL,CACF,CACF,CAAA;AAEJ,CAAC;;;;"}