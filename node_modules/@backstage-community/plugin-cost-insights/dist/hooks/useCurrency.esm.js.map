{"version":3,"file":"useCurrency.esm.js","sources":["../../src/hooks/useCurrency.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Dispatch,\n  SetStateAction,\n  useState,\n  useContext,\n  PropsWithChildren,\n} from 'react';\nimport { Currency } from '../types';\nimport { useConfig } from './useConfig';\n\n/** @public */\nexport type CurrencyContextProps = {\n  currency: Currency;\n  setCurrency: Dispatch<SetStateAction<Currency>>;\n};\n\nexport const CurrencyContext = React.createContext<\n  CurrencyContextProps | undefined\n>(undefined);\n\nexport const CurrencyProvider = ({ children }: PropsWithChildren<{}>) => {\n  const config = useConfig();\n  const currencies = config.currencies;\n  const engineers = currencies.find(currency => currency.kind === null);\n  const [currency, setCurrency] = useState<Currency>(\n    engineers || currencies[0],\n  );\n  return (\n    <CurrencyContext.Provider value={{ currency, setCurrency }}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n};\n\nexport function useCurrency(): [Currency, Dispatch<SetStateAction<Currency>>] {\n  const context = useContext(CurrencyContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.currency, context.setCurrency];\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useCurrency outside of CurrencyProvider');\n}\n"],"names":["currency"],"mappings":";;;AA+Ba,MAAA,eAAA,GAAkB,KAAM,CAAA,aAAA,CAEnC,KAAS,CAAA;AAEJ,MAAM,gBAAmB,GAAA,CAAC,EAAE,QAAA,EAAsC,KAAA;AACvE,EAAA,MAAM,SAAS,SAAU,EAAA;AACzB,EAAA,MAAM,aAAa,MAAO,CAAA,UAAA;AAC1B,EAAA,MAAM,YAAY,UAAW,CAAA,IAAA,CAAK,CAAAA,SAAYA,KAAAA,SAAAA,CAAS,SAAS,IAAI,CAAA;AACpE,EAAM,MAAA,CAAC,QAAU,EAAA,WAAW,CAAI,GAAA,QAAA;AAAA,IAC9B,SAAA,IAAa,WAAW,CAAC;AAAA,GAC3B;AACA,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,gBAAgB,QAAhB,EAAA,EAAyB,OAAO,EAAE,QAAA,EAAU,WAAY,EAAA,EAAA,EACtD,QACH,CAAA;AAEJ;AAEO,SAAS,WAA8D,GAAA;AAC5E,EAAM,MAAA,OAAA,GAAU,WAAW,eAAe,CAAA;AAE1C,EAAA,IAAI,CAAC,OAAS,EAAA;AACZ,IAAY,WAAA,EAAA;AAAA;AAGd,EAAA,OAAO,CAAC,OAAA,CAAQ,QAAU,EAAA,OAAA,CAAQ,WAAW,CAAA;AAC/C;AAEA,SAAS,WAAqB,GAAA;AAC5B,EAAA,MAAM,MAAM,oDAAoD,CAAA;AAClE;;;;"}