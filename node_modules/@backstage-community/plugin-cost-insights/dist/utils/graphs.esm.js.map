{"version":3,"file":"graphs.esm.js","sources":["../../src/utils/graphs.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TooltipProps } from 'recharts';\nimport { Payload } from 'recharts/types/component/DefaultTooltipContent';\nimport { AlertCost, DataKey, ResourceData } from '../types';\nimport { Entity } from '@backstage-community/plugin-cost-insights-common';\nimport {\n  currencyFormatter,\n  dateFormatter,\n  lengthyCurrencyFormatter,\n} from './formatters';\n\nexport const formatGraphValue =\n  (baseCurrency: Intl.NumberFormat) =>\n  (value: number, _index: number, format?: string) => {\n    if (format === 'number') {\n      return value.toLocaleString();\n    }\n\n    if (value < 1) {\n      return lengthyCurrencyFormatter(baseCurrency).format(value);\n    }\n\n    return currencyFormatter(baseCurrency).format(value);\n  };\n\nexport const overviewGraphTickFormatter = (millis: string | number) =>\n  typeof millis === 'number' ? dateFormatter.format(millis) : millis;\n\nexport const tooltipItemOf =\n  (baseCurrency: Intl.NumberFormat) => (payload: Payload<string, string>) => {\n    const value =\n      payload.value && !isNaN(Number(payload.value))\n        ? baseCurrency.format(Number(payload.value))\n        : payload.value;\n    const fill = payload.color as string;\n\n    switch (payload.dataKey) {\n      case DataKey.Current:\n      case DataKey.Previous:\n        return {\n          label: payload.name,\n          value: value,\n          fill: fill,\n        };\n      default:\n        return null;\n    }\n  };\n\nexport const resourceOf = (entity: Entity | AlertCost): ResourceData => ({\n  name: entity.id,\n  previous: entity.aggregation[0],\n  current: entity.aggregation[1],\n});\n\nexport const titleOf = (label?: string | number) => {\n  return label ? String(label) : 'Unlabeled';\n};\n\nexport const isInvalid = ({ label, payload }: TooltipProps<string, string>) => {\n  // null labels are empty strings, which are valid\n  return label === undefined || !payload || !payload.length;\n};\n\nexport const isLabeled = (data?: Record<'activeLabel', string | undefined>) => {\n  return data?.activeLabel && data?.activeLabel !== '';\n};\n\nexport const isUnlabeled = (\n  data?: Record<'activeLabel', string | undefined>,\n) => {\n  return data?.activeLabel === '';\n};\n"],"names":[],"mappings":";;;AA0BO,MAAM,mBACX,CAAC,YAAA,KACD,CAAC,KAAA,EAAe,QAAgB,MAAoB,KAAA;AAClD,EAAA,IAAI,WAAW,QAAU,EAAA;AACvB,IAAA,OAAO,MAAM,cAAe,EAAA;AAAA;AAG9B,EAAA,IAAI,QAAQ,CAAG,EAAA;AACb,IAAA,OAAO,wBAAyB,CAAA,YAAY,CAAE,CAAA,MAAA,CAAO,KAAK,CAAA;AAAA;AAG5D,EAAA,OAAO,iBAAkB,CAAA,YAAY,CAAE,CAAA,MAAA,CAAO,KAAK,CAAA;AACrD;AAEW,MAAA,0BAAA,GAA6B,CAAC,MACzC,KAAA,OAAO,WAAW,QAAW,GAAA,aAAA,CAAc,MAAO,CAAA,MAAM,CAAI,GAAA;AAEvD,MAAM,aACX,GAAA,CAAC,YAAoC,KAAA,CAAC,OAAqC,KAAA;AACzE,EAAA,MAAM,QACJ,OAAQ,CAAA,KAAA,IAAS,CAAC,KAAA,CAAM,OAAO,OAAQ,CAAA,KAAK,CAAC,CAAA,GACzC,aAAa,MAAO,CAAA,MAAA,CAAO,QAAQ,KAAK,CAAC,IACzC,OAAQ,CAAA,KAAA;AACd,EAAA,MAAM,OAAO,OAAQ,CAAA,KAAA;AAErB,EAAA,QAAQ,QAAQ,OAAS;AAAA,IACvB,KAAK,OAAQ,CAAA,OAAA;AAAA,IACb,KAAK,OAAQ,CAAA,QAAA;AACX,MAAO,OAAA;AAAA,QACL,OAAO,OAAQ,CAAA,IAAA;AAAA,QACf,KAAA;AAAA,QACA;AAAA,OACF;AAAA,IACF;AACE,MAAO,OAAA,IAAA;AAAA;AAEb;AAEW,MAAA,UAAA,GAAa,CAAC,MAA8C,MAAA;AAAA,EACvE,MAAM,MAAO,CAAA,EAAA;AAAA,EACb,QAAA,EAAU,MAAO,CAAA,WAAA,CAAY,CAAC,CAAA;AAAA,EAC9B,OAAA,EAAS,MAAO,CAAA,WAAA,CAAY,CAAC;AAC/B,CAAA;AAEa,MAAA,OAAA,GAAU,CAAC,KAA4B,KAAA;AAClD,EAAO,OAAA,KAAA,GAAQ,MAAO,CAAA,KAAK,CAAI,GAAA,WAAA;AACjC;AAEO,MAAM,SAAY,GAAA,CAAC,EAAE,KAAA,EAAO,SAA4C,KAAA;AAE7E,EAAA,OAAO,KAAU,KAAA,KAAA,CAAA,IAAa,CAAC,OAAA,IAAW,CAAC,OAAQ,CAAA,MAAA;AACrD;AAEa,MAAA,SAAA,GAAY,CAAC,IAAqD,KAAA;AAC7E,EAAO,OAAA,IAAA,EAAM,WAAe,IAAA,IAAA,EAAM,WAAgB,KAAA,EAAA;AACpD;AAEa,MAAA,WAAA,GAAc,CACzB,IACG,KAAA;AACH,EAAA,OAAO,MAAM,WAAgB,KAAA,EAAA;AAC/B;;;;"}