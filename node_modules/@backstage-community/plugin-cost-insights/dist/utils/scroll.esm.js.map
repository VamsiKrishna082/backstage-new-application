{"version":3,"file":"scroll.esm.js","sources":["../../src/utils/scroll.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useEffect, useRef } from 'react';\nimport { ScrollTo, useScroll } from '../hooks/useScroll';\n\n/*\n  Utility component use in conjunction with useScroll that allows scrollable components to control behavior and offset.\n  1. ScrollAnchor must be a direct child of a scrollable component.\n  2. ScrollAnchor's parent position must be relative. \n  3. ScrollAnchor's id must be unique.\n*/\n\nexport interface ScrollAnchorProps extends ScrollIntoViewOptions {\n  id: ScrollTo;\n  top?: number;\n  left?: number;\n}\n\nexport const ScrollAnchor = ({\n  id,\n  left = 0,\n  top = -20,\n  block = 'start',\n  inline = 'nearest',\n  behavior = 'smooth',\n}: ScrollAnchorProps) => {\n  const divRef = useRef<HTMLDivElement>(null);\n  const [scroll, setScroll] = useScroll();\n\n  useEffect(() => {\n    function scrollIntoView() {\n      if (divRef.current && scroll === id) {\n        divRef.current.scrollIntoView({\n          block,\n          inline,\n          behavior,\n        });\n        setScroll(null);\n      }\n    }\n\n    scrollIntoView();\n  }, [scroll, setScroll, id, behavior, block, inline]);\n\n  return (\n    <div\n      ref={divRef}\n      style={{ position: 'absolute', height: 0, width: 0, top, left }}\n      data-testid={`scroll-test-${id}`}\n    />\n  );\n};\n"],"names":[],"mappings":";;;AA+BO,MAAM,eAAe,CAAC;AAAA,EAC3B,EAAA;AAAA,EACA,IAAO,GAAA,CAAA;AAAA,EACP,GAAM,GAAA,CAAA,EAAA;AAAA,EACN,KAAQ,GAAA,OAAA;AAAA,EACR,MAAS,GAAA,SAAA;AAAA,EACT,QAAW,GAAA;AACb,CAAyB,KAAA;AACvB,EAAM,MAAA,MAAA,GAAS,OAAuB,IAAI,CAAA;AAC1C,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,SAAU,EAAA;AAEtC,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,SAAS,cAAiB,GAAA;AACxB,MAAI,IAAA,MAAA,CAAO,OAAW,IAAA,MAAA,KAAW,EAAI,EAAA;AACnC,QAAA,MAAA,CAAO,QAAQ,cAAe,CAAA;AAAA,UAC5B,KAAA;AAAA,UACA,MAAA;AAAA,UACA;AAAA,SACD,CAAA;AACD,QAAA,SAAA,CAAU,IAAI,CAAA;AAAA;AAChB;AAGF,IAAe,cAAA,EAAA;AAAA,GACjB,EAAG,CAAC,MAAQ,EAAA,SAAA,EAAW,IAAI,QAAU,EAAA,KAAA,EAAO,MAAM,CAAC,CAAA;AAEnD,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,GAAK,EAAA,MAAA;AAAA,MACL,KAAA,EAAO,EAAE,QAAU,EAAA,UAAA,EAAY,QAAQ,CAAG,EAAA,KAAA,EAAO,CAAG,EAAA,GAAA,EAAK,IAAK,EAAA;AAAA,MAC9D,aAAA,EAAa,eAAe,EAAE,CAAA;AAAA;AAAA,GAChC;AAEJ;;;;"}