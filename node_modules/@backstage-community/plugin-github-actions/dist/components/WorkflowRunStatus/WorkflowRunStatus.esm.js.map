{"version":3,"file":"WorkflowRunStatus.esm.js","sources":["../../../src/components/WorkflowRunStatus/WorkflowRunStatus.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  StatusPending,\n  StatusRunning,\n  StatusOK,\n  StatusWarning,\n  StatusAborted,\n  StatusError,\n} from '@backstage/core-components';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() => ({\n  statusIcon: {\n    '& svg': {\n      position: 'static',\n    },\n  },\n}));\n\nexport const WorkflowRunStatus = (props: {\n  status?: string;\n  conclusion?: string;\n}) => {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n      <Box className={classes.statusIcon}>\n        <WorkflowIcon {...props} />\n      </Box>\n      <Typography variant=\"body2\">{getStatusDescription(props)}</Typography>\n    </Box>\n  );\n};\n\nexport function WorkflowIcon({\n  status,\n  conclusion,\n}: {\n  status?: string;\n  conclusion?: string;\n}) {\n  if (status === undefined) return null;\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n      return <StatusPending />;\n\n    case 'in_progress':\n      return <StatusRunning />;\n    case 'completed':\n      switch (conclusion?.toLocaleLowerCase('en-US')) {\n        case 'skipped':\n        case 'cancelled':\n          return <StatusAborted />;\n\n        case 'timed_out':\n          return <StatusWarning />;\n        case 'failure':\n          return <StatusError />;\n        default:\n          return <StatusOK />;\n      }\n    default:\n      return <StatusPending />;\n  }\n}\n\nexport function getStatusDescription({\n  status,\n  conclusion,\n}: {\n  status?: string;\n  conclusion?: string;\n}) {\n  if (status === undefined) return '';\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n      return 'Queued';\n    case 'in_progress':\n      return 'In progress';\n    case 'completed':\n      switch (conclusion?.toLocaleLowerCase('en-US')) {\n        case 'skipped':\n        case 'cancelled':\n          return 'Aborted';\n        case 'timed_out':\n          return 'Timed out';\n        case 'failure':\n          return 'Error';\n        default:\n          return 'Completed';\n      }\n    default:\n      return 'Pending';\n  }\n}\n"],"names":[],"mappings":";;;;;;AA4BA,MAAM,SAAA,GAAY,WAAW,OAAO;AAAA,EAClC,UAAY,EAAA;AAAA,IACV,OAAS,EAAA;AAAA,MACP,QAAU,EAAA;AAAA;AACZ;AAEJ,CAAE,CAAA,CAAA;AAEW,MAAA,iBAAA,GAAoB,CAAC,KAG5B,KAAA;AACJ,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAA,4BACG,GAAI,EAAA,EAAA,OAAA,EAAQ,QAAO,cAAe,EAAA,QAAA,EAAS,YAAW,QACrD,EAAA,QAAA,EAAA;AAAA,oBAAC,GAAA,CAAA,GAAA,EAAA,EAAI,WAAW,OAAQ,CAAA,UAAA,EACtB,8BAAC,YAAc,EAAA,EAAA,GAAG,OAAO,CAC3B,EAAA,CAAA;AAAA,wBACC,UAAW,EAAA,EAAA,OAAA,EAAQ,OAAS,EAAA,QAAA,EAAA,oBAAA,CAAqB,KAAK,CAAE,EAAA;AAAA,GAC3D,EAAA,CAAA;AAEJ;AAEO,SAAS,YAAa,CAAA;AAAA,EAC3B,MAAA;AAAA,EACA;AACF,CAGG,EAAA;AACD,EAAI,IAAA,MAAA,KAAW,QAAkB,OAAA,IAAA;AACjC,EAAQ,QAAA,MAAA,CAAO,iBAAkB,CAAA,OAAO,CAAG;AAAA,IACzC,KAAK,QAAA;AACH,MAAA,2BAAQ,aAAc,EAAA,EAAA,CAAA;AAAA,IAExB,KAAK,aAAA;AACH,MAAA,2BAAQ,aAAc,EAAA,EAAA,CAAA;AAAA,IACxB,KAAK,WAAA;AACH,MAAQ,QAAA,UAAA,EAAY,iBAAkB,CAAA,OAAO,CAAG;AAAA,QAC9C,KAAK,SAAA;AAAA,QACL,KAAK,WAAA;AACH,UAAA,2BAAQ,aAAc,EAAA,EAAA,CAAA;AAAA,QAExB,KAAK,WAAA;AACH,UAAA,2BAAQ,aAAc,EAAA,EAAA,CAAA;AAAA,QACxB,KAAK,SAAA;AACH,UAAA,2BAAQ,WAAY,EAAA,EAAA,CAAA;AAAA,QACtB;AACE,UAAA,2BAAQ,QAAS,EAAA,EAAA,CAAA;AAAA;AACrB,IACF;AACE,MAAA,2BAAQ,aAAc,EAAA,EAAA,CAAA;AAAA;AAE5B;AAEO,SAAS,oBAAqB,CAAA;AAAA,EACnC,MAAA;AAAA,EACA;AACF,CAGG,EAAA;AACD,EAAI,IAAA,MAAA,KAAW,QAAkB,OAAA,EAAA;AACjC,EAAQ,QAAA,MAAA,CAAO,iBAAkB,CAAA,OAAO,CAAG;AAAA,IACzC,KAAK,QAAA;AACH,MAAO,OAAA,QAAA;AAAA,IACT,KAAK,aAAA;AACH,MAAO,OAAA,aAAA;AAAA,IACT,KAAK,WAAA;AACH,MAAQ,QAAA,UAAA,EAAY,iBAAkB,CAAA,OAAO,CAAG;AAAA,QAC9C,KAAK,SAAA;AAAA,QACL,KAAK,WAAA;AACH,UAAO,OAAA,SAAA;AAAA,QACT,KAAK,WAAA;AACH,UAAO,OAAA,WAAA;AAAA,QACT,KAAK,SAAA;AACH,UAAO,OAAA,OAAA;AAAA,QACT;AACE,UAAO,OAAA,WAAA;AAAA;AACX,IACF;AACE,MAAO,OAAA,SAAA;AAAA;AAEb;;;;"}