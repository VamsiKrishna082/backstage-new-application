'use strict';

var backendPluginApi = require('@backstage/backend-plugin-api');
var alpha = require('@backstage/plugin-catalog-node/alpha');
var GkeEntityProvider = require('../providers/GkeEntityProvider.cjs.js');

const catalogModuleGcpGkeEntityProvider = backendPluginApi.createBackendModule({
  pluginId: "catalog",
  moduleId: "gcp-gke-entity-provider",
  register(env) {
    env.registerInit({
      deps: {
        config: backendPluginApi.coreServices.rootConfig,
        catalog: alpha.catalogProcessingExtensionPoint,
        logger: backendPluginApi.coreServices.logger,
        scheduler: backendPluginApi.coreServices.scheduler
      },
      async init({ config, catalog, logger, scheduler }) {
        catalog.addEntityProvider(
          GkeEntityProvider.GkeEntityProvider.fromConfig({
            logger,
            scheduler,
            config
          })
        );
      }
    });
  }
});

exports.catalogModuleGcpGkeEntityProvider = catalogModuleGcpGkeEntityProvider;
//# sourceMappingURL=catalogModuleGcpGkeEntityProvider.cjs.js.map
