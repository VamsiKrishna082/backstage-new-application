{"version":3,"file":"index-668854a6.esm.js","sources":["../../src/api/types.ts","../../src/api/HeadlampClient.ts","../../src/routes.ts","../../src/plugin.ts","../../src/components/HeadlampIcon/HeadlampIcon.tsx"],"sourcesContent":["import { createApiRef } from '@backstage/core-plugin-api';\n\nexport interface HeadlampApi {\n  startServer(auth: {[key: string]: string}): Promise<void>;\n  refreshKubeconfig(auth: {[key: string]: string}): Promise<void>;\n  health(): Promise<{ status: string }>;\n}\n\nexport const headlampApiRef = createApiRef<HeadlampApi>({\n  id: 'plugin.headlamp.service',\n});","import { DiscoveryApi, FetchApi } from '@backstage/core-plugin-api';\nimport { HeadlampApi } from './types';\n\nexport class HeadlampClient implements HeadlampApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly fetchApi: FetchApi;\n\n  constructor(options: { discoveryApi: DiscoveryApi; fetchApi: FetchApi }) {\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n  private async getBaseUrl() {\n    return await this.discoveryApi.getBaseUrl('headlamp');\n  }\n\n  async startServer(auth: {[key: string]: string}): Promise<void> {\n    const baseUrl = await this.getBaseUrl();\n    await this.fetchApi.fetch(`${baseUrl}/start`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        auth: auth,\n      }),\n    });\n  }\n\n  async refreshKubeconfig(auth: {[key: string]: string}): Promise<void> {\n    const baseUrl = await this.getBaseUrl();\n    await this.fetchApi.fetch(`${baseUrl}/refreshKubeconfig`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        \"auth\": auth,\n      }),\n    });\n  }\n\n  async health(): Promise<{ status: string }> {\n    const baseUrl = await this.getBaseUrl();\n    const response = await this.fetchApi.fetch(`${baseUrl}/health`);\n    return await response.json();\n  }\n}","import { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'headlamp',\n});\n","import {\n  createPlugin,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\nimport { createApiFactory } from '@backstage/core-plugin-api';\nimport { headlampApiRef } from './api/types';\nimport { HeadlampClient } from './api/HeadlampClient';\nimport { discoveryApiRef, fetchApiRef } from '@backstage/core-plugin-api';\n\nimport { rootRouteRef } from './routes';\n\nexport const headlampPlugin = createPlugin({\n  id: 'headlamp',\n  apis: [createApiFactory({\n    api: headlampApiRef,\n    deps: { discoveryApi: discoveryApiRef, fetchApi: fetchApiRef },\n    factory: ({ discoveryApi, fetchApi }) => new HeadlampClient({ discoveryApi, fetchApi }),\n  })],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\nexport const HeadlampPage = headlampPlugin.provide(\n  createRoutableExtension({\n    name: 'HeadlampPage',\n    component: () =>\n      import('./components/HeadlampComponent').then(m => m.HeadlampComponent),\n    mountPoint: rootRouteRef,\n  }),\n);\n","import React from 'react';\nimport { IconComponent } from '@backstage/core-plugin-api';\n\n\nexport const HeadlampIcon: IconComponent = ({ fontSize = 'medium' }) => {\n  // Calculate size based on fontSize prop\n  const getSize = () => {\n    switch (fontSize) {\n      case 'small':\n        return 20;\n      case 'large':\n        return 35;\n      case 'medium':\n      case 'inherit':\n        return '1em';\n      default:\n        return 24;\n    }\n  };\n\n  const size = getSize();\n  const numericSize = typeof size === 'string' ? 24 : size;\n\n  return (\n    <svg\n      width={size}\n      height={numericSize * (512/408)} \n      viewBox=\"0 0 408 512\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M407.951 324.939V204.686L376.111 163.18V93.246L274.052 56.573V0H133.899V56.573L31.8399 93.246V163.18L0 204.686V324.939L31.8399 367.867L0 466.798L204.117 512L407.951 466.798L376.111 367.867L407.951 324.939Z\"\n        fill=\"black\"\n      />\n      <path\n        d=\"M204.118 367.867C260.406 367.867 306.176 322.097 306.176 265.808C306.176 209.519 260.406 163.749 204.118 163.749C147.829 163.749 102.059 209.519 102.059 265.808C102.059 322.097 147.829 367.867 204.118 367.867Z\"\n        fill=\"#FFF200\"\n      />\n    </svg>\n  );\n};\n"],"names":[],"mappings":"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"}