{"version":3,"file":"useArgoCDAppData.esm.js","sources":["../../src/components/useArgoCDAppData.ts"],"sourcesContent":["/*\n * Copyright 2021 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\n\nexport const ARGOCD_ANNOTATION_APP_NAME = 'argocd/app-name';\nexport const ARGOCD_ANNOTATION_APP_SELECTOR = 'argocd/app-selector';\nexport const ARGOCD_ANNOTATION_APP_NAMESPACE = 'argocd/app-namespace';\nexport const ARGOCD_ANNOTATION_PROJECT_NAME = 'argocd/project-name';\nexport const ARGOCD_ANNOTATION_PROXY_URL = 'argocd/proxy-url';\n\nexport const useArgoCDAppData = ({ entity }: { entity: Entity }) => {\n  const appName =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_NAME] ?? '';\n  const appSelector =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_SELECTOR] ?? '';\n  const appNamespace =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_NAMESPACE];\n  const projectName =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_PROJECT_NAME];\n  const url =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_PROXY_URL] ??\n    '/argocd/api';\n  if (!(appName || appSelector || projectName)) {\n    throw new Error(\"'argocd' annotation is missing\");\n  } else if (appName && (appSelector || projectName)) {\n    throw new Error(\n      \"Cannot provide both 'argocd/app-name' and 'argocd-app' annotations\",\n    );\n  }\n  return { url, appName, appSelector, appNamespace, projectName };\n};\n"],"names":[],"mappings":"AAkBO,MAAM,0BAA6B,GAAA;AACnC,MAAM,8BAAiC,GAAA;AACvC,MAAM,+BAAkC,GAAA;AACxC,MAAM,8BAAiC,GAAA;AACvC,MAAM,2BAA8B,GAAA;AAEpC,MAAM,gBAAmB,GAAA,CAAC,EAAE,MAAA,EAAiC,KAAA;AAClE,EAAA,MAAM,OACJ,GAAA,MAAA,EAAQ,QAAS,CAAA,WAAA,GAAc,0BAA0B,CAAK,IAAA,EAAA;AAChE,EAAA,MAAM,WACJ,GAAA,MAAA,EAAQ,QAAS,CAAA,WAAA,GAAc,8BAA8B,CAAK,IAAA,EAAA;AACpE,EAAA,MAAM,YACJ,GAAA,MAAA,EAAQ,QAAS,CAAA,WAAA,GAAc,+BAA+B,CAAA;AAChE,EAAA,MAAM,WACJ,GAAA,MAAA,EAAQ,QAAS,CAAA,WAAA,GAAc,8BAA8B,CAAA;AAC/D,EAAA,MAAM,GACJ,GAAA,MAAA,EAAQ,QAAS,CAAA,WAAA,GAAc,2BAA2B,CAC1D,IAAA,aAAA;AACF,EAAI,IAAA,EAAE,OAAW,IAAA,WAAA,IAAe,WAAc,CAAA,EAAA;AAC5C,IAAM,MAAA,IAAI,MAAM,gCAAgC,CAAA;AAAA,GAClD,MAAA,IAAW,OAAY,KAAA,WAAA,IAAe,WAAc,CAAA,EAAA;AAClD,IAAA,MAAM,IAAI,KAAA;AAAA,MACR;AAAA,KACF;AAAA;AAEF,EAAA,OAAO,EAAE,GAAA,EAAK,OAAS,EAAA,WAAA,EAAa,cAAc,WAAY,EAAA;AAChE;;;;"}