{"version":3,"file":"static/1833.976e3427.chunk.js","mappings":"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","sources":["webpack://app/../../node_modules/@backstage-community/plugin-grafana/node_modules/@backstage/core-components/dist/components/Status/icons/PendingIcon.esm.js","webpack://app/../../node_modules/@backstage-community/plugin-grafana/node_modules/@backstage/core-components/dist/components/Status/icons/AbortedIcon.esm.js","webpack://app/../../node_modules/@backstage-community/plugin-grafana/node_modules/@backstage/core-components/dist/components/Status/Status.esm.js","webpack://app/../../node_modules/@backstage-community/plugin-grafana/dist/components/AlertsCard/AlertsCard.esm.js"],"sourcesContent":["import * as React from 'react';\n\nconst PendingIcon = ({\n  className,\n  dataTestId\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 -960 960 960\",\n      className,\n      \"data-testid\": dataTestId\n    },\n    /* @__PURE__ */ React.createElement(\"path\", { d: \"M280-420q25 0 42.5-17.5T340-480q0-25-17.5-42.5T280-540q-25 0-42.5 17.5T220-480q0 25 17.5 42.5T280-420Zm200 0q25 0 42.5-17.5T540-480q0-25-17.5-42.5T480-540q-25 0-42.5 17.5T420-480q0 25 17.5 42.5T480-420Zm200 0q25 0 42.5-17.5T740-480q0-25-17.5-42.5T680-540q-25 0-42.5 17.5T620-480q0 25 17.5 42.5T680-420ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\" })\n  );\n};\n\nexport { PendingIcon };\n//# sourceMappingURL=PendingIcon.esm.js.map\n","import * as React from 'react';\n\nconst AbortedIcon = ({\n  className,\n  dataTestId\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 -960 960 960\",\n      className,\n      \"data-testid\": dataTestId\n    },\n    /* @__PURE__ */ React.createElement(\"path\", { d: \"M140-440q-25 0-42.5-17.5T80-500q0-25 17.5-42.5T140-560h240q25 0 42.5 17.5T440-500q0 25-17.5 42.5T380-440H140Zm440 0q-25 0-42.5-17.5T520-500q0-25 17.5-42.5T580-560h240q25 0 42.5 17.5T880-500q0 25-17.5 42.5T820-440H580Z\" })\n  );\n};\n\nexport { AbortedIcon };\n//# sourceMappingURL=AbortedIcon.esm.js.map\n","import { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CheckCircleOutline from '@material-ui/icons/CheckCircleOutline';\nimport WarningOutline from '@material-ui/icons/ReportProblemOutlined';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport classNames from 'classnames';\nimport React__default from 'react';\nimport { PendingIcon } from './icons/PendingIcon.esm.js';\nimport { RunningIcon } from './icons/RunningIcon.esm.js';\nimport { AbortedIcon } from './icons/AbortedIcon.esm.js';\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      alignItems: \"baseline\",\n      display: \"flex\"\n    },\n    statusIcon: {\n      flexShrink: 0,\n      position: \"relative\",\n      top: \"0.125em\",\n      marginRight: theme.spacing(1)\n    },\n    statusIconSize: {\n      width: \"0.8em\",\n      height: \"0.8em\"\n    },\n    statusIconSizeForImg: {\n      width: \"1.2em\",\n      height: \"1.2em\"\n    },\n    ok: {\n      fill: theme.palette.status.ok || \"#3E8635\"\n    },\n    warning: {\n      fill: theme.palette.status.warning || \"#F0AB00\"\n    },\n    error: {\n      fill: theme.palette.status.error || \"#C9190B\"\n    },\n    pending: {\n      fill: theme.palette.status.aborted || \"#6A6E73\"\n    },\n    running: {\n      fill: theme.palette.status.aborted || \"#6A6E73\"\n    },\n    aborted: {\n      fill: theme.palette.status.aborted || \"#6A6E73\"\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status ok\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      CheckCircleOutline,\n      {\n        \"data-testid\": \"status-ok\",\n        className: classNames(\n          classes.ok,\n          classes.statusIconSize,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusWarning(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status warning\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      WarningOutline,\n      {\n        \"data-testid\": \"status-warning\",\n        className: classNames(\n          classes.warning,\n          classes.statusIconSize,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusError(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status error\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      ErrorOutline,\n      {\n        \"data-testid\": \"status-error\",\n        className: classNames(\n          classes.error,\n          classes.statusIconSize,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusPending(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status pending\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      PendingIcon,\n      {\n        dataTestId: \"status-pending\",\n        className: classNames(\n          classes.pending,\n          classes.statusIconSizeForImg,\n          classes.statusIcon\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusRunning(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status running\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      RunningIcon,\n      {\n        dataTestId: \"status-running\",\n        className: classNames(\n          classes.running,\n          classes.statusIcon,\n          classes.statusIconSizeForImg\n        )\n      }\n    ),\n    children\n  );\n}\nfunction StatusAborted(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return /* @__PURE__ */ React__default.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status),\n      \"aria-label\": \"Status aborted\",\n      \"aria-hidden\": \"true\",\n      ...otherProps\n    },\n    /* @__PURE__ */ React__default.createElement(\n      AbortedIcon,\n      {\n        dataTestId: \"status-aborted\",\n        className: classNames(\n          classes.aborted,\n          classes.statusIcon,\n          classes.statusIconSizeForImg\n        )\n      }\n    ),\n    children\n  );\n}\n\nexport { StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning };\n//# sourceMappingURL=Status.esm.js.map\n","import React from 'react';\nimport { Progress, Table, Link, StatusAborted, StatusError, StatusWarning, StatusPending, StatusOK } from '@backstage/core-components';\nimport { useEntity, MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { grafanaApiRef } from '../../api.esm.js';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Alert } from '@material-ui/lab';\nimport { isDashboardSelectorAvailable, GRAFANA_ANNOTATION_TAG_SELECTOR, isAlertSelectorAvailable, GRAFANA_ANNOTATION_ALERT_LABEL_SELECTOR, alertSelectorFromEntity, tagSelectorFromEntity } from '../../constants.esm.js';\n\nconst AlertStatusBadge = ({ alert }) => {\n  let statusElmt;\n  switch (alert.state) {\n    case \"ok\":\n    case \"Normal\":\n      statusElmt = /* @__PURE__ */ React.createElement(StatusOK, null);\n      break;\n    case \"paused\":\n    case \"Pending\":\n      statusElmt = /* @__PURE__ */ React.createElement(StatusPending, null);\n      break;\n    case \"no_data\":\n    case \"pending\":\n    case \"NoData\":\n      statusElmt = /* @__PURE__ */ React.createElement(StatusWarning, null);\n      break;\n    case \"alerting\":\n    case \"Alerting\":\n    case \"Error\":\n      statusElmt = /* @__PURE__ */ React.createElement(StatusError, null);\n      break;\n    default:\n      statusElmt = /* @__PURE__ */ React.createElement(StatusAborted, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", null, statusElmt);\n};\nconst AlertsTable = ({\n  alerts,\n  opts\n}) => {\n  const columns = [\n    {\n      title: \"Name\",\n      field: \"name\",\n      cellStyle: { width: \"90%\" },\n      render: (row) => /* @__PURE__ */ React.createElement(Link, { to: row.url, target: \"_blank\", rel: \"noopener\" }, row.name)\n    }\n  ];\n  if (opts.showState) {\n    columns.push({\n      title: \"State\",\n      render: (row) => /* @__PURE__ */ React.createElement(AlertStatusBadge, { alert: row })\n    });\n  }\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      title: opts.title || \"Alerts\",\n      options: {\n        paging: opts.paged ?? false,\n        pageSize: opts.pageSize ?? 5,\n        search: opts.searchable ?? false,\n        emptyRowsWhenPaging: false,\n        sorting: opts.sortable ?? false,\n        draggable: false,\n        padding: \"dense\"\n      },\n      data: alerts,\n      columns\n    }\n  );\n};\nconst Alerts = ({ entity, opts }) => {\n  const grafanaApi = useApi(grafanaApiRef);\n  const configApi = useApi(configApiRef);\n  const unifiedAlertingEnabled = configApi.getOptionalBoolean(\"grafana.unifiedAlerting\") || false;\n  const alertSelector = unifiedAlertingEnabled ? alertSelectorFromEntity(entity) : tagSelectorFromEntity(entity);\n  const { value, loading, error } = useAsync(\n    async () => await grafanaApi.alertsForSelector(alertSelector)\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, error.message);\n  }\n  return /* @__PURE__ */ React.createElement(AlertsTable, { alerts: value || [], opts });\n};\nconst AlertsCard = (opts) => {\n  const { entity } = useEntity();\n  const configApi = useApi(configApiRef);\n  const unifiedAlertingEnabled = configApi.getOptionalBoolean(\"grafana.unifiedAlerting\") || false;\n  if (!unifiedAlertingEnabled && !isDashboardSelectorAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(\n      MissingAnnotationEmptyState,\n      {\n        annotation: GRAFANA_ANNOTATION_TAG_SELECTOR\n      }\n    );\n  }\n  if (unifiedAlertingEnabled && !isAlertSelectorAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(\n      MissingAnnotationEmptyState,\n      {\n        annotation: GRAFANA_ANNOTATION_ALERT_LABEL_SELECTOR\n      }\n    );\n  }\n  const finalOpts = { ...opts, ...{ showState: opts?.showState } };\n  return /* @__PURE__ */ React.createElement(Alerts, { entity, opts: finalOpts });\n};\n\nexport { AlertsCard, AlertsTable };\n//# sourceMappingURL=AlertsCard.esm.js.map\n"],"names":["PendingIcon","className","dataTestId","AbortedIcon","useStyles","makeStyles","theme","StatusOK","props","children","otherProps","classes","CheckCircleOutline","StatusWarning","StatusError","ErrorOutline","StatusPending","StatusRunning","StatusAborted","AlertStatusBadge","alert","statusElmt","AlertsTable","alerts","opts","columns","row","Alerts","entity","grafanaApi","alertSelector","value","loading","error","useAsync","Alert","AlertsCard","unifiedAlertingEnabled","finalOpts"],"sourceRoot":""}