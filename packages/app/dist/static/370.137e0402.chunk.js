"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[370],{15485:(pt,T,t)=>{t.d(T,{A:()=>K});var e=t(39850),y=t(89575),b=t(14041),Z=t(9546),L=t(268),H=t(7031),ft=t(97740),dt=t(11192),gt=function(c){return{root:(0,y.A)({},c.typography.button,{boxSizing:"border-box",borderRadius:c.shape.borderRadius,padding:11,border:"1px solid ".concat((0,L.X4)(c.palette.action.active,.12)),color:(0,L.X4)(c.palette.action.active,.38),"&$selected":{color:c.palette.action.active,backgroundColor:(0,L.X4)(c.palette.action.active,.12),"&:hover":{backgroundColor:(0,L.X4)(c.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,L.X4)(c.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,L.X4)(c.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:c.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:c.typography.pxToRem(15)}}},vt=b.forwardRef(function(c,st){var _=c.children,q=c.classes,it=c.className,ut=c.disabled,o=ut===void 0?!1:ut,at=c.disableFocusRipple,nt=at===void 0?!1:at,ot=c.onChange,rt=c.onClick,J=c.selected,mt=c.size,ht=mt===void 0?"medium":mt,ct=c.value,w=(0,e.A)(c,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]),Et=function(V){rt&&(rt(V,ct),V.isDefaultPrevented())||ot&&ot(V,ct)};return b.createElement(ft.A,(0,y.A)({className:(0,Z.A)(q.root,it,o&&q.disabled,J&&q.selected,ht!=="medium"&&q["size".concat((0,dt.A)(ht))]),disabled:o,focusRipple:!nt,ref:st,onClick:Et,onChange:ot,value:ct,"aria-pressed":J},w),b.createElement("span",{className:q.label},_))});const K=(0,H.A)(gt,{name:"MuiToggleButton"})(vt)},41260:(pt,T,t)=>{var e,y=t(4293),b=t(78920);e={value:!0},T.A=void 0;var Z=b(t(14041)),L=y(t(74044)),H=(0,L.default)(Z.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");T.A=H},44148:(pt,T,t)=>{var e,y=t(4293),b=t(78920);e={value:!0},T.A=void 0;var Z=b(t(14041)),L=y(t(74044)),H=(0,L.default)(Z.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");T.A=H},54361:(pt,T,t)=>{t.d(T,{b:()=>y});var e=t(97214);const y=[[e.L8,e.vv],[e.Ey,e.fO],[e.IB,e.ZD],[e.sA,e.jn],[e.Kx,e.Qz],[e.zj,e.u0],[e.nC,e.fT]]},56420:(pt,T,t)=>{t.d(T,{Y:()=>Et});var e=t(31085),y=t(95208),b=t(18139),Z=t(54195),L=t(77125),H=t(64947),ft=t(93453),dt=t(29365),gt=t(46423),vt=t(5951),K=t(26343),I=t(28233),c=t(55197),st=t(58837),_=t(72501),q=t(5893),it=t(14041),ut=t(45250),o=t.n(ut),at=t(70209),nt=t(92483),ot=t(75202),rt=t(89475),J=t(10265);const mt=(0,st.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),ht=({icon:U})=>{const V=(0,y.n)(),tt=U?V.getSystemIcon(U)??nt.NT:nt.NT;return(0,e.jsx)(tt,{})},ct=({link:U})=>(0,e.jsx)(ot.N_,{to:U.url,children:U.title??U.url}),w=({item:U})=>(0,e.jsxs)(K.A,{button:!1,children:[(0,e.jsx)(gt.A,{children:(0,e.jsx)(ht,{icon:U.icon})}),(0,e.jsx)(vt.A,{primary:U.title,secondary:U.links?.reduce((V,tt,n)=>[...V,n>0&&(0,e.jsx)("br",{},n),(0,e.jsx)(ct,{link:tt},tt.url)],[])})]});function Et(U){const{t:V}=(0,J.i)(rt.O),{title:tt,items:n,children:d}=U,{items:u}=(0,at.l)(),[A,m]=(0,it.useState)(!1),[f,W]=(0,it.useState)(null),F=mt(),M=(0,b.gf)(Z.U).getOptionalConfig("app.support"),Y=(0,q.A)(r=>r.breakpoints.down("sm")),g=r=>{W(r.currentTarget),m(!0)},i=()=>{m(!1)};return M?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.A,{display:"flex",ml:1,children:Y?(0,e.jsx)(dt.A,{color:"primary",size:"small",onClick:g,"data-testid":"support-button","aria-label":"Support",children:(0,e.jsx)(nt.NT,{})}):(0,e.jsx)(H.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:g,startIcon:(0,e.jsx)(nt.NT,{}),children:V("supportButton.title")})}),(0,e.jsxs)(c.Ay,{"data-testid":"support-button-popover",open:A,anchorEl:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:i,children:[(0,e.jsxs)(I.A,{className:F.popoverList,autoFocusItem:!!f,children:[tt&&(0,e.jsx)(K.A,{button:!1,alignItems:"flex-start",className:F.menuItem,children:(0,e.jsx)(_.A,{variant:"subtitle1",children:tt})}),it.Children.map(d,(r,h)=>(0,e.jsx)(K.A,{button:!1,alignItems:"flex-start",className:F.menuItem,children:r},`child-${h}`)),(n??u).map((r,h)=>(0,e.jsx)(w,{item:r},`item-${h}`))]}),(0,e.jsx)(ft.A,{children:(0,e.jsx)(H.A,{color:"primary",onClick:i,"aria-label":"Close",children:V("supportButton.close")})})]})]}):null}},60332:(pt,T,t)=>{t.d(T,{L:()=>tt});var e=t(31085),y=t(78560),b=t(80609),Z=t(47090),L=t(18139),H=t(24453),ft=t(78467),dt=t(58837),gt=t(54917),vt=t(53373),K=t.n(vt),I=t(14041),c=t(22249);const st=(0,c.A)(n=>({text:{fill:n.palette.textContrast},secondary:{fill:n.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function _({edge:{relations:n}}){const d=st();return(0,e.jsx)("text",{className:d.text,textAnchor:"middle",children:n.map((u,A)=>(0,e.jsxs)("tspan",{className:K()(A%2!==0&&d.secondary),children:[A>0&&(0,e.jsx)("tspan",{children:" / "}),u]},u))})}var q=t(46509),it=t(10437);function ut({icon:n,...d}){const u=n??it.A;return(0,e.jsx)(u,{...d})}var o=t(55488);const at=(0,dt.A)(n=>({node:{fill:n.palette.grey[300],stroke:n.palette.grey[300],"&.primary":{fill:n.palette.primary.light,stroke:n.palette.primary.light},"&.secondary":{fill:n.palette.secondary.light,stroke:n.palette.secondary.light}},text:{fill:n.palette.getContrastText(n.palette.grey[300]),"&.primary":{fill:n.palette.primary.contrastText},"&.secondary":{fill:n.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function nt({node:{id:n,entity:d,color:u="default",focused:A,onClick:m}}){const f=at(),[W,F]=(0,I.useState)(0),[M,Y]=(0,I.useState)(0),g=(0,I.useRef)(null),i=(0,q.f)(d,{defaultNamespace:o.oQ});(0,I.useLayoutEffect)(()=>{if(g.current){let{height:v,width:E}=g.current.getBBox();v=Math.round(v),E=Math.round(E),(v!==M||E!==W)&&(F(E),Y(v))}},[W,M]);const r=!!i.Icon,h=10,C=M,j=r?C+h:0,z=j+W+h*2,B=M+h*2,et=i.primaryTitle??n;return(0,e.jsxs)("g",{onClick:m,className:K()(m&&f.clickable),children:[(0,e.jsx)("rect",{className:K()(f.node,u==="primary"&&"primary",u==="secondary"&&"secondary"),width:z,height:B,rx:10}),r&&(0,e.jsx)(ut,{icon:i.Icon,y:h,x:h,width:C,height:C,className:K()(f.text,A&&"focused",u==="primary"&&"primary",u==="secondary"&&"secondary")}),(0,e.jsx)("text",{ref:g,className:K()(f.text,A&&"focused",u==="primary"&&"primary",u==="secondary"&&"secondary"),y:B/2,x:j+(W+h*2)/2,textAnchor:"middle",alignmentBaseline:"middle",children:et}),(0,e.jsx)("title",{children:i.entityRef})]})}var ot=t(54361),rt=t(60241),J=t(22771),mt=t(30043),ht=t(87290);function ct(){const n=(0,L.gf)(mt.v),d=(0,I.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[u,A]=(0,I.useState)({}),m=(0,I.useCallback)(()=>{const{cachedEntities:g,requestedEntities:i}=d.current,r={};i.forEach(h=>{const C=g.get(h);C&&(r[h]=C)}),A(r)},[d,A]),[f,W]=(0,ht.A)(async()=>{const{requestedEntities:g,cachedEntities:i}=d.current,r=Array.from(g).filter(C=>!i.has(C));if(r.length===0){m();return}const{items:h}=await n.getEntitiesByRefs({entityRefs:r});h.forEach(C=>{if(C){const j=(0,y.U2)(C);i.set(j,C)}}),m()},[d,m]),{loading:F,error:M}=f,Y=(0,I.useCallback)(g=>{const i=new Set(g),{requestedEntities:r}=d.current;(i.size!==r.size||Array.from(i).some(h=>!r.has(h)))&&(d.current.requestedEntities=i,W(),m())},[d,W,m]);return{entities:u,loading:F,error:M,requestEntities:Y}}var w=t(45250);function Et({rootEntityRefs:n,filter:{maxDepth:d=Number.POSITIVE_INFINITY,relations:u,kinds:A,entityFilter:m}={}}){const{entities:f,loading:W,error:F,requestEntities:M}=ct();return(0,I.useEffect)(()=>{const g=new Set([...n]),i=new Set;let r=[...n],h=0;for(;r.length>0&&(!isFinite(d)||h<d);){const C=r;for(r=[];C.length>0;){const j=C.shift(),z=f[j];if(i.add(j),z&&z.relations){if(m&&!m(z))continue;for(const B of z.relations)(!u||u.includes(B.type))&&(!A||A.some(et=>B.targetRef.startsWith(`${et.toLocaleLowerCase("en-US")}:`)))&&(i.has(B.targetRef)||(r.push(B.targetRef),g.add(B.targetRef)))}}++h}M([...g])},[f,n,d,u,A,m,M]),{entities:(0,I.useMemo)(()=>m?(0,w.pickBy)(f,(g,i)=>m(g)):f,[f,m]),loading:W,error:F}}function U({rootEntityRefs:n,maxDepth:d=Number.POSITIVE_INFINITY,unidirectional:u=!0,mergeRelations:A=!0,kinds:m,relations:f,entityFilter:W,onNodeClick:F,relationPairs:M=ot.b}){const[Y,g]=(0,I.useState)({}),{entities:i,loading:r,error:h}=Et({rootEntityRefs:n,filter:{maxDepth:d,kinds:m,relations:f,entityFilter:W}});return(0,J.A)(()=>{if(!i||Object.keys(i).length===0){g({});return}const C=Object.entries(i).map(([v,E])=>{const l=n.includes(v),x={id:v,entity:E,focused:l,color:l?"secondary":"primary",kind:E.kind,name:E.metadata.name,namespace:E.metadata.namespace||o.oQ,title:E.metadata.title,spec:E.spec};return F&&(x.onClick=G=>F(x,G)),x}),j=[],z=new Set,B=[...n];for(;B.length>0;){const v=B.pop(),E=i[v];z.add(v),E&&E?.relations?.forEach(l=>{if(i[l.targetRef]&&!(f&&!f.includes(l.type))&&!(m&&!m.some(x=>l.targetRef.startsWith(`${x.toLocaleLowerCase("en-US")}:`)))){if(!u||!z.has(l.targetRef))if(A){const x=M.find(([lt,xt])=>lt===l.type||xt===l.type)??[l.type],[G]=x;j.push({from:G===l.type?v:l.targetRef,to:G===l.type?l.targetRef:v,relations:x,label:"visible"})}else j.push({from:v,to:l.targetRef,relations:[l.type],label:"visible"});if(z.has(l.targetRef)||(B.push(l.targetRef),z.add(l.targetRef)),u){const x=j.findIndex(G=>v===G.from&&l.targetRef===G.to&&!G.relations.includes(l.type));if(x>=0)if(A){const G=M.find(([lt,xt])=>lt===l.type||xt===l.type)??[l.type];j[x].relations=[...j[x].relations,...G]}else j[x].relations=[...j[x].relations,l.type]}}})}const et=j.reduce((v,E)=>{const l=v.findIndex(x=>x.from===E.from&&x.to===E.to);return l>=0?(v[l]={...v[l],relations:Array.from(new Set([...v[l].relations,...E.relations]))},v):[...v,E]},[]);g({nodes:C,edges:et})},100,[i,n,m,f,u,A,F,M]),{loading:r,error:h,...Y}}const V=(0,dt.A)(n=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${n.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),tt=n=>{const{rootEntityNames:d,maxDepth:u=2,unidirectional:A=!0,mergeRelations:m=!0,kinds:f,relations:W,entityFilter:F,direction:M=rt.O.LEFT_RIGHT,onNodeClick:Y,relationPairs:g=ot.b,className:i,zoom:r="enabled",renderNode:h,renderLabel:C,curve:j,showArrowHeads:z}=n,B=(0,gt.A)(),et=V(),v=(0,I.useMemo)(()=>(Array.isArray(d)?d:[d]).map(xt=>(0,y.U2)(xt)),[d]),E=(0,L.gf)(H.m),{loading:l,error:x,nodes:G,edges:lt}=U({rootEntityRefs:v,maxDepth:u,unidirectional:A,mergeRelations:m,kinds:f,relations:W,entityFilter:F,onNodeClick:Y,relationPairs:g});return(0,I.useEffect)(()=>{x&&E.post(x)},[E,x]),(0,e.jsxs)("div",{className:K()(et.container,i),children:[l&&(0,e.jsx)(ft.A,{className:et.progress}),G&&lt&&(0,e.jsx)(b.w,{nodes:G,edges:lt,renderNode:h||nt,renderLabel:C||_,direction:M,className:et.graph,paddingX:B.spacing(4),paddingY:B.spacing(4),labelPosition:Z.D.LabelPosition.RIGHT,labelOffset:B.spacing(1),zoom:r,curve:j,showArrowHeads:z})]})}},60370:(pt,T,t)=>{t.r(T),t.d(T,{CatalogGraphPage:()=>bt});var e=t(31085),y=t(78560),b=t(82326),Z=t(79182),L=t(16454),H=t(17138),ft=t(56420),dt=t(72814),gt=t(52262),vt=t(20987),K=t(53318),I=t(42899),c=t(4321),st=t(72501),_=t(58837),q=t(65859),it=t(98984),ut=t(15485),o=t(14041),at=t(18690),nt=t(60332),ot=t(54361),rt=t(81252),J=t(77125);const mt={curveMonotoneX:"Monotone X",curveStepBefore:"Step Before"},ht=["curveMonotoneX","curveStepBefore"],ct=({value:a,onChange:p})=>{const R=(0,o.useCallback)(s=>p(s),[p]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsx)(rt.w,{label:"Curve",selected:a,items:ht.map(s=>({label:mt[s],value:s})),onChange:R})})};var w=t(60241);const Et={[w.O.LEFT_RIGHT]:"Left to right",[w.O.RIGHT_LEFT]:"Right to left",[w.O.TOP_BOTTOM]:"Top to bottom",[w.O.BOTTOM_TOP]:"Bottom to top"},U=({value:a,onChange:p})=>{const R=(0,o.useCallback)(s=>p(s),[p]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsx)(rt.w,{label:"Direction",selected:a,items:Object.values(w.O).map(s=>({label:Et[s],value:s})),onChange:R})})};var V=t(95061),tt=t(29365),n=t(34839),d=t(35963),u=t(64704);const A=(0,_.A)({formControl:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphMaxDepthFilter"}),m=({value:a,onChange:p})=>{const R=A(),s=(0,o.useRef)(p),[O,P]=(0,o.useState)(a);(0,o.useEffect)(()=>{s.current=p},[p]),(0,o.useEffect)(()=>{P(a)},[a]);const N=(0,o.useCallback)(X=>{const $=Number(X.target.value),S=Number.isFinite($)&&$>0?$:Number.POSITIVE_INFINITY;P(S),s.current(S)},[]),D=(0,o.useCallback)(()=>{P(Number.POSITIVE_INFINITY),s.current(Number.POSITIVE_INFINITY)},[s]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsxs)(V.A,{variant:"outlined",className:R.formControl,children:[(0,e.jsx)(st.A,{variant:"button",children:"Max Depth"}),(0,e.jsx)(d.A,{type:"number",placeholder:"\u221E Infinite",value:Number.isFinite(O)?String(O):"",onChange:N,endAdornment:(0,e.jsx)(n.A,{position:"end",children:(0,e.jsx)(tt.A,{"aria-label":"clear max depth",onClick:D,edge:"end",children:(0,e.jsx)(u.A,{})})}),inputProps:{"aria-label":"maxp"},labelWidth:0})]})})};var f=t(18139),W=t(34477),F=t(30043),M=t(69076),Y=t(86901),g=t(16249),i=t(44148),r=t(41260),h=t(6924),C=t(61783),j=t(73466);const z=(0,_.A)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedKindsFilter"}),B=({value:a,onChange:p})=>{const R=z(),s=(0,f.gf)(W.k),O=(0,f.gf)(F.v),{error:P,value:N}=(0,j.A)(async()=>await O.getEntityFacets({facets:["kind"]}).then(S=>S.facets.kind?.map(k=>k.value).sort()||[]));(0,o.useEffect)(()=>{P&&s.post({message:"Failed to load entity kinds",severity:"error"})},[P,s]);const D=(0,o.useMemo)(()=>N&&N.map(S=>S.toLocaleLowerCase("en-US")),[N]),X=(0,o.useCallback)((S,k)=>{p(D&&D.every(yt=>k.includes(yt))?void 0:k)},[D,p]),$=(0,o.useCallback)(()=>{p(a?.length?a:void 0)},[a,p]);return!N?.length||!D?.length||P?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(J.A,{pb:1,pt:1,children:[(0,e.jsx)(st.A,{variant:"button",children:"Kinds"}),(0,e.jsx)(C.Ay,{className:R.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:D,value:a??D,getOptionLabel:S=>N[D.indexOf(S)]??S,onChange:X,onBlur:$,renderOption:(S,{selected:k})=>(0,e.jsx)(Y.A,{control:(0,e.jsx)(M.A,{icon:(0,e.jsx)(r.A,{fontSize:"small"}),checkedIcon:(0,e.jsx)(i.A,{fontSize:"small"}),checked:k}),label:N[D.indexOf(S)]??S}),size:"small",popupIcon:(0,e.jsx)(h.A,{"data-testid":"selected-kinds-expand"}),renderInput:S=>(0,e.jsx)(g.A,{...S,variant:"outlined"})})]})},et=(0,_.A)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedRelationsFilter"}),v=({relationPairs:a,value:p,onChange:R})=>{const s=et(),O=(0,o.useMemo)(()=>a.flat(),[a]),P=(0,o.useCallback)((D,X)=>{R(O.every($=>X.includes($))?void 0:X)},[O,R]),N=(0,o.useCallback)(()=>{R(p?.length?p:void 0)},[p,R]);return(0,e.jsxs)(J.A,{pb:1,pt:1,children:[(0,e.jsx)(st.A,{variant:"button",children:"Relations"}),(0,e.jsx)(C.Ay,{className:s.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:O,value:p??O,onChange:P,onBlur:N,renderOption:(D,{selected:X})=>(0,e.jsx)(Y.A,{control:(0,e.jsx)(M.A,{icon:(0,e.jsx)(r.A,{fontSize:"small"}),checkedIcon:(0,e.jsx)(i.A,{fontSize:"small"}),checked:X}),label:D}),size:"small",popupIcon:(0,e.jsx)(h.A,{"data-testid":"selected-relations-expand"}),renderInput:D=>(0,e.jsx)(g.A,{...D,variant:"outlined"})})]})};var E=t(73643);const l=(0,_.A)({root:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphSwitchFilter"}),x=({label:a,value:p,onChange:R})=>{const s=l(),O=(0,o.useCallback)(P=>{R(P.target.checked)},[R]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsx)(Y.A,{control:(0,e.jsx)(E.A,{checked:p,onChange:O,name:a,color:"primary"}),label:a,className:s.root})})};var G=t(45810),lt=t.n(G);function xt({initialState:a={}}){const p=(0,at.zy)(),R=(0,at.Zp)(),s=(0,o.useMemo)(()=>lt().parse(p.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[p.search]),O=(0,o.useMemo)(()=>(Array.isArray(s.rootEntityRefs)?s.rootEntityRefs:a?.rootEntityRefs??[]).map(Q=>(0,y.KU)(Q)),[a?.rootEntityRefs,s.rootEntityRefs]),P=(0,o.useCallback)(Q=>{if(O.length===Q.length&&O.every((jt,At)=>(0,y.U2)(jt)===(0,y.U2)(Q[At])))return;const Mt=lt().stringify({...s,rootEntityRefs:Q.map(jt=>(0,y.U2)(jt))},{arrayFormat:"brackets",addQueryPrefix:!0});R(Mt)},[O,R,s]),[N,D]=(0,o.useState)(()=>typeof s.maxDepth=="string"?Ft(s.maxDepth):a?.maxDepth??Number.POSITIVE_INFINITY),[X,$]=(0,o.useState)(()=>Array.isArray(s.selectedRelations)?s.selectedRelations:a?.selectedRelations),[S,k]=(0,o.useState)(()=>(Array.isArray(s.selectedKinds)?s.selectedKinds:a?.selectedKinds)?.map(Q=>Q.toLocaleLowerCase("en-US"))),[yt,Dt]=(0,o.useState)(()=>typeof s.unidirectional=="string"?s.unidirectional==="true":a?.unidirectional??!0),[Rt,Tt]=(0,o.useState)(()=>typeof s.mergeRelations=="string"?s.mergeRelations==="true":a?.mergeRelations??!0),[It,Lt]=(0,o.useState)(()=>typeof s.direction=="string"?s.direction:a?.direction??w.O.LEFT_RIGHT),[Ot,Nt]=(0,o.useState)(()=>typeof s.curve=="string"?s.curve:a?.curve??"curveMonotoneX"),[Pt,St]=(0,o.useState)(()=>typeof s.showFilters=="string"?s.showFilters==="true":a?.showFilters??!0),Bt=(0,o.useCallback)(()=>St(Q=>!Q),[St]);return(0,o.useEffect)(()=>{const Q=lt().stringify({rootEntityRefs:O.map(y.U2),maxDepth:isFinite(N)?N:"\u221E",selectedKinds:S,selectedRelations:X,unidirectional:yt,mergeRelations:Rt,direction:It,showFilters:Pt,curve:Ot},{arrayFormat:"brackets",addQueryPrefix:!0});R(Q,{replace:!0})},[N,Ot,S,X,yt,Rt,It,Pt,O,R]),{rootEntityNames:O,setRootEntityNames:P,maxDepth:N,setMaxDepth:D,selectedRelations:X,setSelectedRelations:$,selectedKinds:S,setSelectedKinds:k,unidirectional:yt,setUnidirectional:Dt,mergeRelations:Rt,setMergeRelations:Tt,direction:It,setDirection:Lt,curve:Ot,setCurve:Nt,showFilters:Pt,toggleShowFilters:Bt}}function Ft(a){return a==="\u221E"?Number.POSITIVE_INFINITY:Number(a)}const Kt=(0,_.A)(a=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:a.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:a.spacing(1),gridAutoRows:"auto",[a.breakpoints.up("lg")]:{display:"block"},[a.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[a.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[a.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}}),{name:"PluginCatalogGraphCatalogGraphPage"}),bt=a=>{const{relationPairs:p=ot.b,initialState:R,entityFilter:s}=a,O=(0,at.Zp)(),P=Kt(),N=(0,dt.S)(vt.s),{maxDepth:D,setMaxDepth:X,selectedKinds:$,setSelectedKinds:S,selectedRelations:k,setSelectedRelations:yt,unidirectional:Dt,setUnidirectional:Rt,mergeRelations:Tt,setMergeRelations:It,direction:Lt,setDirection:Ot,curve:Nt,setCurve:Pt,rootEntityNames:St,setRootEntityNames:Bt,showFilters:Q,toggleShowFilters:Ut}=xt({initialState:R}),Mt=(0,gt.s)(),jt=(0,o.useCallback)((At,zt)=>{const Ct=(0,y.KU)(At.id);if(zt.shiftKey){const Wt=N({kind:Ct.kind.toLocaleLowerCase("en-US"),namespace:Ct.namespace.toLocaleLowerCase("en-US"),name:Ct.name});Mt.captureEvent("click",At.entity.metadata.title??(0,K.S)(Ct),{attributes:{to:Wt}}),O(Wt)}else Mt.captureEvent("click",At.entity.metadata.title??(0,K.S)(Ct)),Bt([Ct])},[N,O,Bt,Mt]);return(0,e.jsxs)(b.Y,{themeId:"home",children:[(0,e.jsx)(Z.Y,{title:"Catalog Graph",subtitle:St.map(At=>(0,K.S)(At)).join(", ")}),(0,e.jsxs)(L.U,{stretch:!0,className:P.content,children:[(0,e.jsx)(H.d,{titleComponent:(0,e.jsxs)(ut.A,{value:"show filters",selected:Q,onChange:()=>Ut(),children:[(0,e.jsx)(q.A,{})," Filters"]}),children:(0,e.jsx)(ft.Y,{children:"Start tracking your component in by adding it to the software catalog."})}),(0,e.jsxs)(I.A,{container:!0,alignItems:"stretch",className:P.container,children:[Q&&(0,e.jsxs)(I.A,{item:!0,xs:12,lg:2,className:P.filters,children:[(0,e.jsx)(m,{value:D,onChange:X}),(0,e.jsx)(B,{value:$,onChange:S}),(0,e.jsx)(v,{value:k,onChange:yt,relationPairs:p}),(0,e.jsx)(U,{value:Lt,onChange:Ot}),(0,e.jsx)(ct,{value:Nt,onChange:Pt}),(0,e.jsx)(x,{value:Dt,onChange:Rt,label:"Simplified"}),(0,e.jsx)(x,{value:Tt,onChange:It,label:"Merge Relations"})]}),(0,e.jsx)(I.A,{item:!0,xs:!0,className:P.fullHeight,children:(0,e.jsxs)(c.A,{className:P.graphWrapper,children:[(0,e.jsxs)(st.A,{variant:"caption",color:"textSecondary",display:"block",className:P.legend,children:[(0,e.jsx)(it.A,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."]}),(0,e.jsx)(nt.L,{...a,rootEntityNames:St,maxDepth:D,kinds:$&&$.length>0?$:void 0,relations:k&&k.length>0?k:void 0,mergeRelations:Tt,unidirectional:Dt,onNodeClick:jt,direction:Lt,relationPairs:p,entityFilter:s,className:P.graph,zoom:"enabled",curve:Nt})]})})]})]})]})}},98984:(pt,T,t)=>{var e,y=t(4293),b=t(78920);e={value:!0},T.A=void 0;var Z=b(t(14041)),L=y(t(74044)),H=(0,L.default)(Z.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap");T.A=H}}]);})();

//# sourceMappingURL=370.137e0402.chunk.js.map