"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5360],{56420:(de,K,t)=>{t.d(K,{Y:()=>ce});var e=t(31085),D=t(95208),p=t(18139),B=t(54195),v=t(77125),L=t(64947),i=t(93453),u=t(29365),A=t(46423),Y=t(5951),P=t(26343),h=t(28233),g=t(55197),R=t(58837),b=t(72501),se=t(5893),V=t(14041),ne=t(45250),k=t.n(ne),j=t(70209),C=t(92483),F=t(75202),re=t(89475),oe=t(10265);const ae=(0,R.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),le=({icon:c})=>{const T=(0,D.n)(),f=c?T.getSystemIcon(c)??C.NT:C.NT;return(0,e.jsx)(f,{})},ie=({link:c})=>(0,e.jsx)(F.N_,{to:c.url,children:c.title??c.url}),_=({item:c})=>(0,e.jsxs)(P.A,{button:!1,children:[(0,e.jsx)(A.A,{children:(0,e.jsx)(le,{icon:c.icon})}),(0,e.jsx)(Y.A,{primary:c.title,secondary:c.links?.reduce((T,f,y)=>[...T,y>0&&(0,e.jsx)("br",{},y),(0,e.jsx)(ie,{link:f},f.url)],[])})]});function ce(c){const{t:T}=(0,oe.i)(re.O),{title:f,items:y,children:M}=c,{items:J}=(0,j.l)(),[X,G]=(0,V.useState)(!1),[H,w]=(0,V.useState)(null),N=ae(),q=(0,p.gf)(B.U).getOptionalConfig("app.support"),ee=(0,se.A)(I=>I.breakpoints.down("sm")),$=I=>{w(I.currentTarget),G(!0)},te=()=>{G(!1)};return q?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.A,{display:"flex",ml:1,children:ee?(0,e.jsx)(u.A,{color:"primary",size:"small",onClick:$,"data-testid":"support-button","aria-label":"Support",children:(0,e.jsx)(C.NT,{})}):(0,e.jsx)(L.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:$,startIcon:(0,e.jsx)(C.NT,{}),children:T("supportButton.title")})}),(0,e.jsxs)(g.Ay,{"data-testid":"support-button-popover",open:X,anchorEl:H,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:te,children:[(0,e.jsxs)(h.A,{className:N.popoverList,autoFocusItem:!!H,children:[f&&(0,e.jsx)(P.A,{button:!1,alignItems:"flex-start",className:N.menuItem,children:(0,e.jsx)(b.A,{variant:"subtitle1",children:f})}),V.Children.map(M,(I,Z)=>(0,e.jsx)(P.A,{button:!1,alignItems:"flex-start",className:N.menuItem,children:I},`child-${Z}`)),(y??J).map((I,Z)=>(0,e.jsx)(_,{item:I},`item-${Z}`))]}),(0,e.jsx)(i.A,{children:(0,e.jsx)(L.A,{color:"primary",onClick:te,"aria-label":"Close",children:T("supportButton.close")})})]})]}):null}},62979:(de,K,t)=>{t.r(K),t.d(K,{GcpProjectsPage:()=>Te});var e=t(31085),D=t(18690),p=t(64947),B=t(18139),v=t(42899),L=t(16249),i=t(14041),u=t(88951),A=t(16454),Y=t(21332),P=t(78733);const h=()=>{},g=(0,i.createContext)({stepperLength:0,stepIndex:0,setStepIndex:h,stepHistory:[],setStepHistory:h,onStepChange:h});function R(s){const{children:a,elevated:l,onStepChange:r,activeStep:n=0}=s,[d,o]=(0,i.useState)(n),S=Array.from({length:n+1},(O,m)=>m),[W,E]=(0,i.useState)(S);(0,i.useEffect)(()=>{o(n)},[n]);const U=[];let Q;return i.Children.forEach(a,O=>{(0,i.isValidElement)(O)&&(O.props.end?Q=O:U.push(O))}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.Provider,{value:{stepIndex:d,setStepIndex:o,stepHistory:W,setStepHistory:E,onStepChange:r,stepperLength:i.Children.count(a)},children:(0,e.jsx)(P.A,{activeStep:d,orientation:"vertical",elevation:l?2:0,children:U})}),d>=i.Children.count(a)-1&&Q]})}var b=t(77125),se=t(21619),V=t(41045),ne=t(37877),k=t(58837),j=t(72501),C=t(89475),F=t(10265);const re=(0,k.A)(s=>({root:{marginTop:s.spacing(3),"& button":{marginRight:s.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),oe=({text:s,handleClick:a})=>{const{t:l}=(0,F.i)(C.O);return(0,e.jsx)(p.A,{onClick:a,children:s||l("simpleStepper.reset")})},ae=({text:s,handleClick:a,disabled:l,last:r,stepIndex:n})=>{const{t:d}=(0,F.i)(C.O);return(0,e.jsx)(p.A,{variant:"contained",color:"primary",disabled:l,"data-testid":`nextButton-${n}`,onClick:a,children:s||d(r?"simpleStepper.finish":"simpleStepper.next")})},le=({text:s,handleClick:a,disabled:l,stepIndex:r})=>{const{t:n}=(0,F.i)(C.O);return(0,e.jsx)(p.A,{variant:"outlined",color:"primary",disabled:l,"data-testid":`skipButton-${r}`,onClick:a,children:s||n("simpleStepper.skip")})},ie=({text:s,handleClick:a,disabled:l,stepIndex:r})=>{const{t:n}=(0,F.i)(C.O);return(0,e.jsx)(p.A,{onClick:a,"data-testid":`backButton-${r}`,disabled:l,children:s||n("simpleStepper.back")})},_=({actions:s={},children:a})=>{const l=re(),{stepperLength:r,stepIndex:n,setStepIndex:d,stepHistory:o,setStepHistory:S,onStepChange:W}=(0,i.useContext)(g),E=(m,xe)=>{xe&&xe(),W&&W(n,m),d(m)},U=()=>{const m=s.nextStep?s.nextStep(n,r-1):n+1;E(m,s.onNext),S([...o,m])},Q=()=>{o.pop(),E(o[o.length-1],s.onBack),S([...o])},O=()=>{E(0,s.onRestart),S([0])};return(0,e.jsxs)(b.A,{className:l.root,children:[[void 0,!0].includes(s.showBack)&&n!==0&&(0,e.jsx)(ie,{text:s.backText,handleClick:Q,disabled:n===0,stepIndex:n}),s.showSkip&&(0,e.jsx)(le,{text:s.skipText,handleClick:U,disabled:!!r&&n>=r||!!s.canSkip&&!s.canSkip(),stepIndex:n}),[void 0,!0].includes(s.showNext)&&(0,e.jsx)(ae,{text:s.nextText,handleClick:U,disabled:!!r&&n>=r||!!s.canNext&&!s.canNext(),stepIndex:n}),s.showRestart&&n!==0&&(0,e.jsx)(oe,{text:s.restartText,handleClick:O,stepIndex:n}),a]})},ce=(0,k.A)(s=>({end:{padding:s.spacing(3)}}),{name:"SimpleStepperStep"});function c(s){const{title:a,children:l,end:r,actions:n,...d}=s,o=ce();return r?(0,e.jsxs)(b.A,{className:o.end,children:[(0,e.jsx)(j.A,{variant:"h6",children:a}),l,(0,e.jsx)(_,{actions:{...n||{},showNext:!1}})]}):(0,e.jsxs)(se.A,{...d,children:[(0,e.jsx)(ne.A,{children:(0,e.jsx)(j.A,{variant:"h6",children:a})}),(0,e.jsxs)(V.A,{children:[l,(0,e.jsx)(_,{actions:n})]})]})}var T=t(67562),f=t(12554),y=t(99338),M=t(64398),J=t(82326),X=t(79182),G=t(17138),H=t(56420),w=t(73657),N=t(61249),q=t(72814),ee=t(7284),$=t(91042);const te=()=>{const[s,a]=(0,i.useState)(""),[l,r]=(0,i.useState)(""),[n,d]=(0,i.useState)(!0),o=(0,B.gf)(N.i),[{status:S,result:W,error:E},{execute:U}]=(0,$.Y)(()=>o.createProject({projectId:l,projectName:s})),Q={ProjectName:s,ProjectId:l};async function O(){console.log({projectName:s,projectId:l}),await U()}return console.log(S,W,E),(0,e.jsx)(A.U,{children:(0,e.jsx)(v.A,{container:!0,spacing:3,children:(0,e.jsx)(v.A,{item:!0,xs:12,md:6,children:(0,e.jsxs)(Y.n,{title:"Create new GCP Project",children:[(0,e.jsxs)(R,{children:[(0,e.jsx)(c,{title:"Project Name",children:(0,e.jsx)(L.A,{variant:"outlined",name:"projectName",label:"Project Name",helperText:"The name of the new project.",inputProps:{"aria-label":"Project Name"},onChange:m=>a(m.target.value),value:s,fullWidth:!0})}),(0,e.jsx)(c,{title:"Project ID",children:(0,e.jsx)(L.A,{variant:"outlined",name:"projectId",label:"projectId",onChange:m=>r(m.target.value),value:l,fullWidth:!0})}),(0,e.jsx)(c,{title:"Review",actions:{nextText:"Confirm",onNext:()=>d(!1)},children:(0,e.jsx)(T.t,{metadata:Q})})]}),(0,e.jsxs)(v.A,{container:!0,spacing:2,style:{marginTop:16},children:[(0,e.jsx)(v.A,{item:!0,children:(0,e.jsx)(p.A,{component:w.N_,variant:"text","data-testid":"cancel-button",color:"primary",to:"/gcp-projects",children:"Cancel"})}),(0,e.jsx)(v.A,{item:!0,children:(0,e.jsx)(p.A,{variant:"contained",color:"primary",disabled:n||S==="loading",onClick:O,children:"Create"})})]}),S==="loading"&&(0,e.jsx)(u.A,{style:{marginTop:20}}),E&&(0,e.jsx)(f.b,{title:"Failed to create project",error:E,children:E.toString()}),S==="success"&&W&&(0,e.jsxs)(y.B,{severity:"info",title:"Project Created",children:["Project ",(0,e.jsx)("strong",{children:l})," created successfully!"]})]})})})})},I=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.S,{label:"Owner",value:"Tensure"}),(0,e.jsx)(M.S,{label:"Lifecycle",value:"Prod"})]}),Z=()=>{const s=(0,q.S)(ee.rQ)();return(0,e.jsxs)(J.Y,{themeId:"tool",children:[(0,e.jsx)(X.Y,{title:"New GCP Project",type:"GCP",typeLink:s,children:I}),(0,e.jsxs)(A.U,{children:[(0,e.jsx)(G.d,{title:"",children:(0,e.jsx)(H.Y,{children:"This plugin allows you to view and interact with your gcp projects."})}),(0,e.jsx)(te,{})]})]})};var ue=t(91413),he=t(4321),pe=t(61009),me=t(13677),x=t(54801),z=t(9719),je=t(76842);const ve=(0,k.A)(s=>({root:{maxWidth:720,margin:s.spacing(2)},title:{padding:s.spacing(1,0,2,0)},table:{padding:s.spacing(1)}})),Ae=()=>{const s=(0,B.gf)(N.i),a=ve(),[{status:l,result:r,error:n},{execute:d}]=(0,$.Y)(async()=>s.getProject(decodeURIComponent(window.location.search.split("projectId=")[1])));if((0,je.u)(d),l==="loading")return(0,e.jsx)(u.A,{});if(n)return(0,e.jsx)(y.B,{title:"Failed to load project",children:n.toString()});const o="https://console.cloud.google.com";return(0,e.jsx)(pe.A,{component:he.A,className:a.table,children:(0,e.jsx)(pe.A,{children:(0,e.jsxs)(me.A,{children:[(0,e.jsxs)(z.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(j.A,{noWrap:!0,children:"Name"})}),(0,e.jsx)(x.A,{children:r?.name})]}),(0,e.jsxs)(z.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(j.A,{noWrap:!0,children:"Project Number"})}),(0,e.jsx)(x.A,{children:r?.projectNumber})]}),(0,e.jsxs)(z.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(j.A,{noWrap:!0,children:"Project ID"})}),(0,e.jsx)(x.A,{children:r?.projectId})]}),(0,e.jsxs)(z.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(j.A,{noWrap:!0,children:"State"})}),(0,e.jsx)(x.A,{children:r?.lifecycleState})]}),(0,e.jsxs)(z.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(j.A,{noWrap:!0,children:"Creation Time"})}),(0,e.jsx)(x.A,{children:r?.createTime})]}),(0,e.jsxs)(z.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(j.A,{noWrap:!0,children:"Links"})}),(0,e.jsx)(x.A,{children:(0,e.jsxs)(ue.A,{variant:"text",color:"primary","aria-label":"text primary button group",children:[r?.name&&(0,e.jsx)(p.A,{children:(0,e.jsx)("a",{href:`${o}/home/dashboard?project=${r.projectId}&supportedpurview=project`,target:"_blank",rel:"noreferrer noopener",children:"GCP"})}),r?.name&&(0,e.jsx)(p.A,{children:(0,e.jsx)("a",{href:`${o}/logs/query?project=${r.projectId}&supportedpurview=project`,target:"_blank",rel:"noreferrer noopener",children:"Logs"})})]})})]})]})})})},Pe=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.S,{label:"Owner",value:"Tensure"}),(0,e.jsx)(M.S,{label:"Lifecycle",value:"Production"})]}),ge=()=>{const s=(0,q.S)(ee.rQ)();return(0,e.jsxs)(J.Y,{themeId:"service",children:[(0,e.jsx)(X.Y,{title:"GCP Project Details",type:"GCP",typeLink:s,children:Pe}),(0,e.jsxs)(A.U,{children:[(0,e.jsx)(G.d,{title:"",children:(0,e.jsx)(H.Y,{children:"Support Button"})}),(0,e.jsx)(Ae,{})]})]})};var Se=t(71677),Ee=t(75202),Ce=t(29021);const fe=({text:s,max:a})=>s.length<a?(0,e.jsx)(j.A,{color:"primary",component:"span",children:s}):(0,e.jsx)(Se.Ay,{title:s,children:(0,e.jsxs)(j.A,{color:"primary",component:"span",children:[s.slice(0,a),"..."]})}),Ie=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.S,{label:"Owner",value:"Tensure"}),(0,e.jsx)(M.S,{label:"Lifecycle",value:"Production"})]}),Oe=()=>{const s=(0,B.gf)(N.i),[{status:a,result:l,error:r},{execute:n}]=(0,$.Y)(()=>s.listProjects());if((0,je.u)(n),a==="loading")return(0,e.jsx)(u.A,{});if(r)return(0,e.jsx)(y.B,{title:"Failed to load projects",children:r.toString()});function d(o){return(0,e.jsx)(Ee.N_,{to:`project?projectId=${encodeURIComponent(o)}`,children:(0,e.jsx)(j.A,{color:"primary",children:(0,e.jsx)(fe,{text:o,max:60})})})}return(0,e.jsx)("div",{style:{height:"95%",width:"100%"},children:(0,e.jsx)(Ce.X,{columns:[{field:"name",title:"Name",defaultSort:"asc"},{field:"projectNumber",title:"Project Number"},{field:"projectID",title:"Project ID",render:o=>d(o.id)},{field:"state",title:"State"},{field:"creationTime",title:"Creation Time"}],data:l?.map(o=>({id:o.projectId,name:o.name,projectNumber:o?.projectNumber||"Error",projectID:o.projectId,state:o?.lifecycleState||"Error",creationTime:o?.createTime||"Error"}))||[],options:{pageSize:5,pageSizeOptions:[5,10,25,50,100]}})})},De=()=>(0,e.jsxs)(J.Y,{themeId:"service",children:[(0,e.jsx)(X.Y,{title:"GCP Projects",type:"tool",children:Ie}),(0,e.jsxs)(A.U,{children:[(0,e.jsxs)(G.d,{title:"",children:[(0,e.jsx)(p.A,{component:w.N_,variant:"contained",color:"primary",to:"new",children:"New Project"}),(0,e.jsx)(H.Y,{children:"All your software catalog entities"})]}),(0,e.jsx)(Oe,{})]})]}),Te=()=>(0,e.jsxs)(D.BV,{children:[(0,e.jsx)(D.qh,{path:"/",element:(0,e.jsx)(De,{})}),(0,e.jsx)(D.qh,{path:"/new",element:(0,e.jsx)(Z,{})}),(0,e.jsx)(D.qh,{path:"/project",element:(0,e.jsx)(ge,{})})]})},91042:(de,K,t)=>{t.d(K,{Y:()=>p});var e=t(14041),D=t(16261);function p(B,v){const[L,i]=(0,e.useState)({status:"not-executed",error:void 0,result:v}),u=(0,e.useRef)(),A=(0,e.useRef)(),Y=(0,D.J)({execute(...P){A.current=P;const h=B(...P);return u.current=h,i(g=>({...g,status:"loading"})),h.then(g=>{h===u.current&&i(R=>({...R,status:"success",error:void 0,result:g}))},g=>{h===u.current&&i(R=>({...R,status:"error",error:g}))}),h},reset(){i({status:"not-executed",error:void 0,result:v}),u.current=void 0,A.current=void 0}});return[L,(0,e.useMemo)(()=>({reset(){Y.current.reset()},execute:(...P)=>Y.current.execute(...P)}),[]),{promise:u.current,lastArgs:A.current}]}}}]);})();

//# sourceMappingURL=5360.610e8184.chunk.js.map