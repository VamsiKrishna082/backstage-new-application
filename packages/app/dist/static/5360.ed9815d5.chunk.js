"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5360],{56420:(pe,G,t)=>{t.d(G,{Y:()=>ue});var e=t(31085),O=t(95208),j=t(18139),N=t(54195),v=t(77125),W=t(64947),i=t(93453),h=t(29365),A=t(46423),H=t(5951),S=t(26343),m=t(28233),f=t(55197),U=t(58837),w=t(72501),oe=t(5893),J=t(14041),le=t(45250),_=t.n(le),u=t(70209),C=t(92483),$=t(75202),ae=t(89475),ie=t(10265);const ce=(0,U.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),de=({icon:c})=>{const T=(0,O.n)(),I=c?T.getSystemIcon(c)??C.NT:C.NT;return(0,e.jsx)(I,{})},je=({link:c})=>(0,e.jsx)($.N_,{to:c.url,children:c.title??c.url}),q=({item:c})=>(0,e.jsxs)(S.A,{button:!1,children:[(0,e.jsx)(A.A,{children:(0,e.jsx)(de,{icon:c.icon})}),(0,e.jsx)(H.A,{primary:c.title,secondary:c.links?.reduce((T,I,E)=>[...T,E>0&&(0,e.jsx)("br",{},E),(0,e.jsx)(je,{link:I},I.url)],[])})]});function ue(c){const{t:T}=(0,ie.i)(ae.O),{title:I,items:E,children:B}=c,{items:X}=(0,u.l)(),[Z,z]=(0,J.useState)(!1),[Q,ee]=(0,J.useState)(null),K=ce(),te=(0,j.gf)(N.U).getOptionalConfig("app.support"),se=(0,oe.A)(y=>y.breakpoints.down("sm")),V=y=>{ee(y.currentTarget),z(!0)},ne=()=>{z(!1)};return te?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.A,{display:"flex",ml:1,children:se?(0,e.jsx)(h.A,{color:"primary",size:"small",onClick:V,"data-testid":"support-button","aria-label":"Support",children:(0,e.jsx)(C.NT,{})}):(0,e.jsx)(W.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:V,startIcon:(0,e.jsx)(C.NT,{}),children:T("supportButton.title")})}),(0,e.jsxs)(f.Ay,{"data-testid":"support-button-popover",open:Z,anchorEl:Q,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:ne,children:[(0,e.jsxs)(m.A,{className:K.popoverList,autoFocusItem:!!Q,children:[I&&(0,e.jsx)(S.A,{button:!1,alignItems:"flex-start",className:K.menuItem,children:(0,e.jsx)(w.A,{variant:"subtitle1",children:I})}),J.Children.map(B,(y,k)=>(0,e.jsx)(S.A,{button:!1,alignItems:"flex-start",className:K.menuItem,children:y},`child-${k}`)),(E??X).map((y,k)=>(0,e.jsx)(q,{item:y},`item-${k}`))]}),(0,e.jsx)(i.A,{children:(0,e.jsx)(W.A,{color:"primary",onClick:ne,"aria-label":"Close",children:T("supportButton.close")})})]})]}):null}},62979:(pe,G,t)=>{t.r(G),t.d(G,{GcpProjectsPage:()=>Re});var e=t(31085),O=t(18690),j=t(64947),N=t(18139),v=t(42899),W=t(16249),i=t(14041),h=t(88951),A=t(16454),H=t(21332),S=t(78733);const m=()=>{},f=(0,i.createContext)({stepperLength:0,stepIndex:0,setStepIndex:m,stepHistory:[],setStepHistory:m,onStepChange:m});function U(s){const{children:a,elevated:l,onStepChange:r,activeStep:n=0}=s,[d,o]=(0,i.useState)(n),F=Array.from({length:n+1},(g,P)=>P),[M,Y]=(0,i.useState)(F);(0,i.useEffect)(()=>{o(n)},[n]);const L=[];let R;return i.Children.forEach(a,g=>{(0,i.isValidElement)(g)&&(g.props.end?R=g:L.push(g))}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f.Provider,{value:{stepIndex:d,setStepIndex:o,stepHistory:M,setStepHistory:Y,onStepChange:r,stepperLength:i.Children.count(a)},children:(0,e.jsx)(S.A,{activeStep:d,orientation:"vertical",elevation:l?2:0,children:L})}),d>=i.Children.count(a)-1&&R]})}var w=t(77125),oe=t(21619),J=t(41045),le=t(37877),_=t(58837),u=t(72501),C=t(89475),$=t(10265);const ae=(0,_.A)(s=>({root:{marginTop:s.spacing(3),"& button":{marginRight:s.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),ie=({text:s,handleClick:a})=>{const{t:l}=(0,$.i)(C.O);return(0,e.jsx)(j.A,{onClick:a,children:s||l("simpleStepper.reset")})},ce=({text:s,handleClick:a,disabled:l,last:r,stepIndex:n})=>{const{t:d}=(0,$.i)(C.O);return(0,e.jsx)(j.A,{variant:"contained",color:"primary",disabled:l,"data-testid":`nextButton-${n}`,onClick:a,children:s||d(r?"simpleStepper.finish":"simpleStepper.next")})},de=({text:s,handleClick:a,disabled:l,stepIndex:r})=>{const{t:n}=(0,$.i)(C.O);return(0,e.jsx)(j.A,{variant:"outlined",color:"primary",disabled:l,"data-testid":`skipButton-${r}`,onClick:a,children:s||n("simpleStepper.skip")})},je=({text:s,handleClick:a,disabled:l,stepIndex:r})=>{const{t:n}=(0,$.i)(C.O);return(0,e.jsx)(j.A,{onClick:a,"data-testid":`backButton-${r}`,disabled:l,children:s||n("simpleStepper.back")})},q=({actions:s={},children:a})=>{const l=ae(),{stepperLength:r,stepIndex:n,setStepIndex:d,stepHistory:o,setStepHistory:F,onStepChange:M}=(0,i.useContext)(f),Y=(P,D)=>{D&&D(),M&&M(n,P),d(P)},L=()=>{const P=s.nextStep?s.nextStep(n,r-1):n+1;Y(P,s.onNext),F([...o,P])},R=()=>{o.pop(),Y(o[o.length-1],s.onBack),F([...o])},g=()=>{Y(0,s.onRestart),F([0])};return(0,e.jsxs)(w.A,{className:l.root,children:[[void 0,!0].includes(s.showBack)&&n!==0&&(0,e.jsx)(je,{text:s.backText,handleClick:R,disabled:n===0,stepIndex:n}),s.showSkip&&(0,e.jsx)(de,{text:s.skipText,handleClick:L,disabled:!!r&&n>=r||!!s.canSkip&&!s.canSkip(),stepIndex:n}),[void 0,!0].includes(s.showNext)&&(0,e.jsx)(ce,{text:s.nextText,handleClick:L,disabled:!!r&&n>=r||!!s.canNext&&!s.canNext(),stepIndex:n}),s.showRestart&&n!==0&&(0,e.jsx)(ie,{text:s.restartText,handleClick:g,stepIndex:n}),a]})},ue=(0,_.A)(s=>({end:{padding:s.spacing(3)}}),{name:"SimpleStepperStep"});function c(s){const{title:a,children:l,end:r,actions:n,...d}=s,o=ue();return r?(0,e.jsxs)(w.A,{className:o.end,children:[(0,e.jsx)(u.A,{variant:"h6",children:a}),l,(0,e.jsx)(q,{actions:{...n||{},showNext:!1}})]}):(0,e.jsxs)(oe.A,{...d,children:[(0,e.jsx)(le.A,{children:(0,e.jsx)(u.A,{variant:"h6",children:a})}),(0,e.jsxs)(J.A,{children:[l,(0,e.jsx)(q,{actions:n})]})]})}var T=t(67562),I=t(12554),E=t(99338),B=t(64398),X=t(82326),Z=t(79182),z=t(17138),Q=t(56420),ee=t(73657),K=t(61249),te=t(72814),se=t(7284),V=t(91042);const ne=()=>{const[s,a]=(0,i.useState)(""),[l,r]=(0,i.useState)(""),[n,d]=(0,i.useState)(!0),[o,F]=(0,i.useState)(""),[,M]=(0,i.useState)(null),[Y,L]=(0,i.useState)(""),[R,g]=(0,i.useState)(!1),P=(0,N.gf)(K.i),[{status:D,result:me,error:re},{execute:Ne}]=(0,V.Y)(()=>P.createProject({projectId:l,projectName:s})),We={ProjectName:s,ProjectId:l};(0,i.useEffect)(()=>{let p;async function Ke(){console.log("Please wait: Linking the project to billing account"),await P.setBillingAccount({projectId:l,billingAccountId:"014578-2C2708-DF0259"}),F("Billing account linked successfully.")}return R&&l&&(p=setInterval(async()=>{try{const Pe=(await P.getProject(l)).lifecycleState||"";console.log("Polling status:",D),L(Pe),Pe==="ACTIVE"&&(clearInterval(p),g(!1),await Ke())}catch(ge){console.error("Polling failed:",ge),clearInterval(p),g(!1)}},5e3)),()=>{p&&clearInterval(p)}},[R,l]);async function Ue(){M(null),L("");try{await Ne(),g(!0)}catch(p){p.message.includes("Project ID")&&p.message.includes("already")?M(`Project ID '${l}' is already in use. Please choose another.`):(console.error("Unexpected error creating project:",p),M("Failed to create project. See console for details."))}}return console.log(D,me,re),(0,e.jsx)(A.U,{children:(0,e.jsx)(v.A,{container:!0,spacing:3,children:(0,e.jsx)(v.A,{item:!0,xs:12,md:6,children:(0,e.jsxs)(H.n,{title:"Create new GCP Project",children:[(0,e.jsxs)(U,{children:[(0,e.jsx)(c,{title:"Project Name",children:(0,e.jsx)(W.A,{variant:"outlined",name:"projectName",label:"Project Name",helperText:"The name of the new project.",inputProps:{"aria-label":"Project Name"},onChange:p=>a(p.target.value),value:s,fullWidth:!0})}),(0,e.jsx)(c,{title:"Project ID",children:(0,e.jsx)(W.A,{variant:"outlined",name:"projectId",label:"projectId",onChange:p=>r(p.target.value),value:l,fullWidth:!0})}),(0,e.jsx)(c,{title:"Review",actions:{nextText:"Confirm",onNext:()=>d(!1)},children:(0,e.jsx)(T.t,{metadata:We})})]}),(0,e.jsxs)(v.A,{container:!0,spacing:2,style:{marginTop:16},children:[(0,e.jsx)(v.A,{item:!0,children:(0,e.jsx)(j.A,{component:ee.N_,variant:"text","data-testid":"cancel-button",color:"primary",to:"/gcp-projects",children:"Cancel"})}),(0,e.jsx)(v.A,{item:!0,children:(0,e.jsx)(j.A,{variant:"contained",color:"primary",disabled:n||D==="loading",onClick:Ue,children:"Create"})})]}),D==="loading"&&(0,e.jsx)(h.A,{style:{marginTop:20}}),re&&(0,e.jsx)(I.b,{title:"Failed to create project",error:re,children:re.toString()}),D==="success"&&me&&(0,e.jsxs)(E.B,{severity:"info",title:"Project Creation Started",children:["Project ",(0,e.jsx)("strong",{children:l})," creation initiated successfully. ",(0,e.jsx)("br",{}),R&&(0,e.jsx)("div",{children:"Checking project status..."})]}),Y&&(0,e.jsxs)(E.B,{severity:"info",title:"Project Status",children:["Current GCP project status: ",(0,e.jsx)("strong",{children:D})]}),o&&(0,e.jsx)(E.B,{severity:o.includes("Failed")?"error":"info",title:"Billing Status",children:o})]})})})})},y=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.S,{label:"Owner",value:"Tensure"}),(0,e.jsx)(B.S,{label:"Lifecycle",value:"Prod"})]}),k=()=>{const s=(0,te.S)(se.rQ)();return(0,e.jsxs)(X.Y,{themeId:"tool",children:[(0,e.jsx)(Z.Y,{title:"New GCP Project",type:"GCP",typeLink:s,children:y}),(0,e.jsxs)(A.U,{children:[(0,e.jsx)(z.d,{title:"",children:(0,e.jsx)(Q.Y,{children:"This plugin allows you to view and interact with your gcp projects."})}),(0,e.jsx)(ne,{})]})]})};var ve=t(91413),Ae=t(4321),xe=t(61009),Se=t(13677),x=t(54801),b=t(9719),he=t(76842);const fe=(0,_.A)(s=>({root:{maxWidth:720,margin:s.spacing(2)},title:{padding:s.spacing(1,0,2,0)},table:{padding:s.spacing(1)}})),Ee=()=>{const s=(0,N.gf)(K.i),a=fe(),[{status:l,result:r,error:n},{execute:d}]=(0,V.Y)(async()=>s.getProject(decodeURIComponent(window.location.search.split("projectId=")[1])));if((0,he.u)(d),l==="loading")return(0,e.jsx)(h.A,{});if(n)return(0,e.jsx)(E.B,{title:"Failed to load project",children:n.toString()});const o="https://console.cloud.google.com";return(0,e.jsx)(xe.A,{component:Ae.A,className:a.table,children:(0,e.jsx)(xe.A,{children:(0,e.jsxs)(Se.A,{children:[(0,e.jsxs)(b.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(u.A,{noWrap:!0,children:"Name"})}),(0,e.jsx)(x.A,{children:r?.name})]}),(0,e.jsxs)(b.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(u.A,{noWrap:!0,children:"Project Number"})}),(0,e.jsx)(x.A,{children:r?.projectNumber})]}),(0,e.jsxs)(b.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(u.A,{noWrap:!0,children:"Project ID"})}),(0,e.jsx)(x.A,{children:r?.projectId})]}),(0,e.jsxs)(b.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(u.A,{noWrap:!0,children:"State"})}),(0,e.jsx)(x.A,{children:r?.lifecycleState})]}),(0,e.jsxs)(b.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(u.A,{noWrap:!0,children:"Creation Time"})}),(0,e.jsx)(x.A,{children:r?.createTime})]}),(0,e.jsxs)(b.A,{children:[(0,e.jsx)(x.A,{children:(0,e.jsx)(u.A,{noWrap:!0,children:"Links"})}),(0,e.jsx)(x.A,{children:(0,e.jsxs)(ve.A,{variant:"text",color:"primary","aria-label":"text primary button group",children:[r?.name&&(0,e.jsx)(j.A,{children:(0,e.jsx)("a",{href:`${o}/home/dashboard?project=${r.projectId}&supportedpurview=project`,target:"_blank",rel:"noreferrer noopener",children:"GCP"})}),r?.name&&(0,e.jsx)(j.A,{children:(0,e.jsx)("a",{href:`${o}/logs/query?project=${r.projectId}&supportedpurview=project`,target:"_blank",rel:"noreferrer noopener",children:"Logs"})})]})})]})]})})})},Ce=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.S,{label:"Owner",value:"Tensure"}),(0,e.jsx)(B.S,{label:"Lifecycle",value:"Production"})]}),Ie=()=>{const s=(0,te.S)(se.rQ)();return(0,e.jsxs)(X.Y,{themeId:"service",children:[(0,e.jsx)(Z.Y,{title:"GCP Project Details",type:"GCP",typeLink:s,children:Ce}),(0,e.jsxs)(A.U,{children:[(0,e.jsx)(z.d,{title:"",children:(0,e.jsx)(Q.Y,{children:"Support Button"})}),(0,e.jsx)(Ee,{})]})]})};var ye=t(71677),De=t(75202),Oe=t(29021);const Te=({text:s,max:a})=>s.length<a?(0,e.jsx)(u.A,{color:"primary",component:"span",children:s}):(0,e.jsx)(ye.Ay,{title:s,children:(0,e.jsxs)(u.A,{color:"primary",component:"span",children:[s.slice(0,a),"..."]})}),Be=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.S,{label:"Owner",value:"Tensure"}),(0,e.jsx)(B.S,{label:"Lifecycle",value:"Production"})]}),Me=()=>{const s=(0,N.gf)(K.i),[{status:a,result:l,error:r},{execute:n}]=(0,V.Y)(()=>s.listProjects());if((0,he.u)(n),a==="loading")return(0,e.jsx)(h.A,{});if(r)return(0,e.jsx)(E.B,{title:"Failed to load projects",children:r.toString()});function d(o){return(0,e.jsx)(De.N_,{to:`project?projectId=${encodeURIComponent(o)}`,children:(0,e.jsx)(u.A,{color:"primary",children:(0,e.jsx)(Te,{text:o,max:60})})})}return(0,e.jsx)("div",{style:{height:"95%",width:"100%"},children:(0,e.jsx)(Oe.X,{columns:[{field:"name",title:"Name",defaultSort:"asc"},{field:"projectNumber",title:"Project Number"},{field:"projectID",title:"Project ID",render:o=>d(o.id)},{field:"state",title:"State"},{field:"creationTime",title:"Creation Time"}],data:l?.map(o=>({id:o.projectId,name:o.name,projectNumber:o?.projectNumber||"Error",projectID:o.projectId,state:o?.lifecycleState||"Error",creationTime:o?.createTime||"Error"}))||[],options:{pageSize:5,pageSizeOptions:[5,10,25,50,100]}})})},Le=()=>(0,e.jsxs)(X.Y,{themeId:"service",children:[(0,e.jsx)(Z.Y,{title:"GCP Projects",type:"tool",children:Be}),(0,e.jsxs)(A.U,{children:[(0,e.jsxs)(z.d,{title:"",children:[(0,e.jsx)(j.A,{component:ee.N_,variant:"contained",color:"primary",to:"new",children:"New Project"}),(0,e.jsx)(Q.Y,{children:"All your software catalog entities"})]}),(0,e.jsx)(Me,{})]})]}),Re=()=>(0,e.jsxs)(O.BV,{children:[(0,e.jsx)(O.qh,{path:"/",element:(0,e.jsx)(Le,{})}),(0,e.jsx)(O.qh,{path:"/new",element:(0,e.jsx)(k,{})}),(0,e.jsx)(O.qh,{path:"/project",element:(0,e.jsx)(Ie,{})})]})},91042:(pe,G,t)=>{t.d(G,{Y:()=>j});var e=t(14041),O=t(16261);function j(N,v){const[W,i]=(0,e.useState)({status:"not-executed",error:void 0,result:v}),h=(0,e.useRef)(),A=(0,e.useRef)(),H=(0,O.J)({execute(...S){A.current=S;const m=N(...S);return h.current=m,i(f=>({...f,status:"loading"})),m.then(f=>{m===h.current&&i(U=>({...U,status:"success",error:void 0,result:f}))},f=>{m===h.current&&i(U=>({...U,status:"error",error:f}))}),m},reset(){i({status:"not-executed",error:void 0,result:v}),h.current=void 0,A.current=void 0}});return[W,(0,e.useMemo)(()=>({reset(){H.current.reset()},execute:(...S)=>H.current.execute(...S)}),[]),{promise:h.current,lastArgs:A.current}]}}}]);})();

//# sourceMappingURL=5360.ed9815d5.chunk.js.map