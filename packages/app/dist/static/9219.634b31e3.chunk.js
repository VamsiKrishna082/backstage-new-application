"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9219],{29219:(xt,C,n)=>{n.r(C),n.d(C,{ArgoCDDetailsCard:()=>Mt});var e=n(14041),v=n(58007),T=n(8109),V=n(71677),I=n(77125),A=n(64947),$=n(88951),y=n(52950),M=n(53538),z=n(41078),L=n(65229),P=n(48475),x=n(18139),O=n(54195),H=n(80663),W=n(36978),Y=n(77714),Z=n(16400),G=n(32293),X=n(58837),B=n(42899),E=n(72501),J=n(29365),K=n(73845),Q=n(95479),k=n.n(Q),u=n(99703),g=n(7031),w=n(61009),q=n(13677),N=n(54801),_=n(9719);const tt=t=>(0,u.A)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),et={root:{border:"0",verticalAlign:"top"}},at=t=>(0,u.A)({root:{margin:t.spacing(0,0,-1,0)}}),nt=t=>(0,u.A)({root:{padding:t.spacing(0,0,1,0)},random:{}}),st=(0,g.A)(tt,{name:"BackstageMetadataTableTitleCell"})(N.A),lt=(0,g.A)(et,{name:"BackstageMetadataTableCell"})(N.A),rt=({dense:t,children:a})=>e.createElement(w.A,{size:t?"small":"medium"},e.createElement(q.A,null,a)),ot=({title:t,children:a,...l})=>e.createElement(_.A,null,t&&e.createElement(st,null,t),e.createElement(lt,{colSpan:t?1:2,...l},a)),b=(0,g.A)(at,{name:"BackstageMetadataTableList"})(({classes:t,children:a})=>e.createElement(v.A,{disablePadding:!0,className:t.root},a)),D=(0,g.A)(nt,{name:"BackstageMetadataTableListItem"})(({classes:t,children:a})=>e.createElement(T.A,{className:t.root},a));var ct=n(49375),it=n(9911);const F=(0,u.A)({root:{margin:"0 0",listStyleType:"none"}}),mt=t=>(0,u.A)({root:{...F.root,paddingLeft:t.spacing(1)}}),R=(0,g.A)(F,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:a})=>e.createElement(b,{classes:t},a)),j=(0,g.A)(mt,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:a})=>e.createElement(b,{classes:t},a));function dt(t,a,l){const r=t.map((c,i)=>e.createElement(D,{key:i},h(c,a,l)));return l?e.createElement(j,null,r):e.createElement(R,null,r)}function gt(t,a,l){const r=Object.keys(t).map(c=>{const i=h(t[c],a,!0);return e.createElement(D,{key:c},e.createElement(E.A,{variant:"body2",component:"span"},`${a.titleFormat(c)}: `),i)});return l?e.createElement(j,null,r):e.createElement(R,null,r)}function h(t,a,l){if(e.isValidElement(t))return e.createElement(e.Fragment,null,t);if(t!==null&&typeof t=="object"){if(a.nestedValuesAsYaml)return e.createElement(ct.z,{language:"yaml",text:it.Ay.dump(t),customStyle:{background:"transparent",lineHeight:"1.4",padding:"0",margin:0}});if(!Array.isArray(t))return gt(t,a,l)}return Array.isArray(t)?dt(t,a,l):typeof t=="boolean"?e.createElement(e.Fragment,null,t?"\u2705":"\u274C"):e.createElement(E.A,{variant:"body2",component:"span"},t)}const ut=({value:t,options:a})=>e.createElement(e.Fragment,null,h(t,a,!1)),pt=({title:t,value:a,options:l})=>e.createElement(ot,{title:l.titleFormat(t)},e.createElement(ut,{value:a,options:l}));function ft(t,a){return Object.keys(t).map(l=>e.createElement(pt,{key:l,title:l,value:t[l],options:a}))}function At(t){const{metadata:a,dense:l=!0,options:r}=t,c=ft(a,{titleFormat:k(),nestedValuesAsYaml:r?.nestedValuesAsYaml??!1,...r});return e.createElement(rt,{dense:l},c)}var yt=n(39330),Et=n(32881);const ht=(0,X.A)({paper:{padding:"2em"},header:{display:"flex",flexDirection:"row",paddingBottom:"2em"},button:{textTransform:"none",justifyContent:"flex-start",fontWeight:"bold"},icon:{fontSize:20},content:{height:"80%"}}),St=(t,a)=>{const l=ht(),[r,c]=e.useState(!1),p=(0,x.gf)(O.U).getOptionalBoolean("argocd.namespacedApps")??!1,d=m=>f=>{f.type==="keydown"&&(f.key==="Tab"||f.key==="Shift")||c(m)},s={"Argo CD Instance":t.metadata?.instance?.name??"",repoUrl:t.spec?.source?.repoURL,repoPath:t.spec?.source?.path,destinationServer:t.spec?.destination?.server,destinationNamespace:t.spec?.destination?.namespace,syncStatus:t.status?.sync?.status,images:t.status?.summary?.images,...a&&{link:e.createElement(A.A,{variant:"outlined",color:"primary",size:"small",title:"Open Argo CD Dashboard",endIcon:e.createElement(yt.A,null),target:"_blank",href:`${a}/applications/${p?`${t.metadata.namespace}/${t.metadata.name}`:t.metadata.name}`},"Open Argo CD Dashboard")}},o=()=>e.createElement(e.Fragment,null,e.createElement("div",{className:l.header},e.createElement(B.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},e.createElement(B.A,{item:!0},e.createElement(E.A,{variant:"h5"},"Argo Name: ",t.metadata.name))),e.createElement(J.A,{key:"dismiss",title:"Close the drawer",onClick:()=>c(!1),color:"inherit"},e.createElement(Et.A,null))),e.createElement("div",{className:l.content},e.createElement(At,{metadata:s})));return e.createElement(e.Fragment,null,e.createElement(A.A,{title:t.metadata.name,className:l.button,onClick:d(!0)},t.metadata.name),e.createElement(K.Ay,{anchor:"right",classes:{paper:l.paper},open:r,onClose:d(!1)},o()))},Ct=({conditions:t})=>{const[a,l]=(0,e.useState)([]);return(0,e.useEffect)(()=>{l(t?.map(r=>({key:`${r.lastTransitionTime}-${r.type}`,...r}))||[])},[t]),e.createElement(e.Fragment,null,a?e.createElement(v.A,{dense:!0},a.map(r=>e.createElement(T.A,{style:{padding:0},key:r.key},r.message))):null)},vt=t=>y.c9.fromISO(t).toRelative(),Tt=t=>t.finishedAt?vt(t.finishedAt):t.phase,U=({value:t,conditions:a})=>{const l={Pending:"#dcbc21",Synced:"green",Healthy:"green",Inactive:"black",Failed:"red"};return a!==void 0?e.createElement(V.Ay,{title:e.createElement(Ct,{conditions:a}),placement:"bottom-start"},e.createElement(I.A,{display:"flex",alignItems:"center"},e.createElement(A.A,{style:{paddingLeft:"0px"}},e.createElement("span",{style:{display:"block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:l[t]||"#dcbc21",marginRight:"5px"}}),t))):e.createElement(I.A,{display:"flex",alignItems:"center"},e.createElement("span",{style:{display:"block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:l[t]||"#dcbc21",marginRight:"5px"}}),t)},S=({data:t,extraColumns:a,retry:l})=>{const r=(0,x.gf)(O.U),c=r.getOptionalString("argocd.baseUrl"),i=!!r.getOptionalConfigArray("argocd.appLocatorMethods")?.length,p=s=>{if(i&&!c){const o=r.getConfigArray("argocd.appLocatorMethods").find(m=>m.getOptionalString("type")==="config")?.getOptionalConfigArray("instances")?.find(m=>m.getOptionalString("name")===s.metadata?.instance?.name);return o?.getOptionalString("frontendUrl")??o?.getOptionalString("url")}return c},d=[{title:"Name",highlight:!0,field:"name",render:s=>St(s,p(s)),customSort:(s,o)=>s.metadata.name.localeCompare(o.metadata.name)},{title:"Sync Status",field:"syncStatus",render:s=>e.createElement(U,{value:s.status.sync.status,conditions:s.status.conditions}),customSort:(s,o)=>s.status.sync.status.localeCompare(o.status.sync.status)},{title:"Health Status",field:"healthStatus",render:s=>e.createElement(U,{value:s.status.health.status,conditions:void 0}),customSort:(s,o)=>s.status.health.status.localeCompare(o.status.health.status)},{title:"Last Synced",defaultSort:"desc",field:"lastSynced",render:s=>s.status.operationState?Tt(s.status.operationState):"",customSort:(s,o)=>y.c9.fromISO(s.status.operationState?.finishedAt||"3000-01-01T00:00:00.000Z").toMillis()-y.c9.fromISO(o.status.operationState?.finishedAt||"3000-01-01T00:00:00.000Z").toMillis()}];return i&&d.splice(1,0,{title:"Instance",field:"instance",render:s=>s.metadata?.instance?.name,customSort:(s,o)=>s.metadata?.instance?.name.localeCompare(o.metadata?.instance?.name)}),e.createElement(z.X,{title:"ArgoCD overview",options:{paging:!0,search:!1,sorting:!0,draggable:!1,padding:"dense"},data:t.items||[],columns:d.concat(a),actions:[{icon:()=>e.createElement(Y.A,null),tooltip:"Refresh",isFreeAction:!0,onClick:()=>l()}]})},It=({entity:t,extraColumns:a})=>{const{url:l,appName:r,appSelector:c,appNamespace:i,projectName:p}=(0,M.nD)({entity:t}),{loading:d,value:s,error:o,retry:m}=(0,W.T)({url:l,appName:r,appSelector:c,appNamespace:i,projectName:p});if(d)return e.createElement(L.n,{title:"ArgoCD overview"},e.createElement($.A,null));if(o)return e.createElement(L.n,{title:"ArgoCD overview"},"Error occurred while fetching data. ",o.name,": ",o.message);if(s){if(s.items!==void 0)return e.createElement(S,{data:s,retry:m,extraColumns:a});if(Array.isArray(s)){const Lt={items:s};return e.createElement(S,{data:Lt,retry:m,extraColumns:a})}const f={items:[s]};return e.createElement(S,{data:f,retry:m,extraColumns:a})}return null},Mt=t=>{const{entity:a}=(0,Z.tN)();return(0,H.a)(a)?e.createElement(P.t,null,e.createElement(It,{entity:a,extraColumns:t.extraColumns||[]})):e.createElement(G.o,{annotation:M.TV})}}}]);})();

//# sourceMappingURL=9219.634b31e3.chunk.js.map